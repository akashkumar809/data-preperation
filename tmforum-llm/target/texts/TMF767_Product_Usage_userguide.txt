TM Forum Specification 
Product Usage Management 
User Guide
Maturity Level: Beta
Team Approved Date: 06-Jun-2024
Approval Status: Team approved
IPR Mode: RAND
Release Status: Preview
Version 5.0.0
TMF767


 NOTICE
Copyright © TM Forum 2024. All Rights Reserved.
This document and translations of it may be copied and furnished to others, and derivative
works that comment on or otherwise explain it or assist in its implementation may be
prepared, copied, published, and distributed, in whole or in part, without restriction of any
kind, provided that the above copyright notice and this section are included on all such
copies and derivative works. However, this document itself may not be modified in any way,
including by removing the copyright notice or references to TM FORUM, except as needed
for the purpose of developing any document or deliverable produced by a TM FORUM
Collaboration Project Team (in which case the rules applicable to copyrights, as set forth in
the TM FORUM IPR Policy, must be followed) or as required to translate it into languages
other than English.
The limited permissions granted above are perpetual and will not be revoked by TM FORUM
or its successors or assigns.
This document and the information contained herein is provided on an "AS IS" basis and TM
FORUM DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT
LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL
NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
Direct inquiries to the TM Forum office:
181 New Road, Suite 304
Parsippany, NJ 07054, USA
Tel No. +1 862 227 1648
TM Forum Web Page: www.tmforum.org


 Table of Contents
NOTICE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  i
Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  1
Sample Use Cases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
Support of polymorphism and extension patterns. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  3
RESOURCE MODEL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
Managed Entity and Task Resource Models. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
ProductUsage resource. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
ProductUsageSpecification resource . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  13
Notification Resource Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  22
ProductUsage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  23
ProductUsageSpecification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  28
API OPERATIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  34
Operations on ProductUsage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  34
Retrieves a ProductUsage by ID. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  34
List or find ProductUsage objects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  36
Creates a ProductUsage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  38
Updates partially a ProductUsage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  41
Deletes a ProductUsage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  49
Operations on ProductUsageSpecification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  49
Retrieves a ProductUsageSpecification by ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  49
List or find ProductUsageSpecification objects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  51
Creates a ProductUsageSpecification. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  53
Updates partially a ProductUsageSpecification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  56
Deletes a ProductUsageSpecification. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  64
API NOTIFICATIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  65
Register listener . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  65
Unregister listener . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  66
Publish Event to listener . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  66
Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  68
Release History. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  68
Contributors to Document . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  68


 Introduction
This document is the user-guide of the REST API for Product Usage Management. It
includes the data model definition as well as all available operations for the Usage and
UsageSpecification resources.
The Product Usage Management API provides a standardized mechanism for product usage
management such as the creation, update, retrieval, import and export of a collection of
usages. A product usage is an occurrence of employing a Product, for its intended purpose
which is of interest to the business and can have charges applied to it.
The Product Usage API manages both rated and non-rated usages. For example, it allows a
service provider:
• To retrieve usage generated by a partner platform in order to rate it
• To provide rated usages to a partner for their consumption
The Product Usage API manages the Product Usage resource:
• A Product Usage represents an event that may be of interest to the business and can
have charges applied to it. It is comprised of characteristics which define all the attributes
known for that particular type of usage.
• The main attributes are its id, usageDate, usageType, it’s usageType related
UsageSpecification, characteristics (name/value pairs), status, related Parties and rating
related information (such as date, amount, taxes).
• A Product Usage follows a simple lifecycle which is presented later for illustrative
purposes, defining such aspects as whether it is rated, rerated or billed.
The Product Usage API performs the following operations on the Usage resource:
• Retrieval of a Product Usage or a collection of Product Usage, depending on filter criteria
• Partial update of a Product Usage or of a collection of Product Usage
• Creation of a Product usage


 Sample Use Cases
A few simple use-cases are presented:
• Creation of a simple ProductUsageSpecification, defining the characteristics a voice call
(caller 
and 
receipient 
numbers, 
start 
and 
stop 
date-and-time); 
listing
ProductUsageSpecification’s 
at 
version 
2.5; 
retrieving 
a 
single
ProductUsageSpecification based on it’s id (91b2-43106cbc8191) and ultimately its
deletion based on the same id.
• Creation of a simple ProductUsage relating to a voice call retrieval; listing Product Usage
of usageType “Voice”; retrieving a specific Product Usage based on it’s id
(5130d5131a23); updating a Product Usage status to “billed” and ultimately deleting this
Usage based on the same id.


 Support of polymorphism and extension
patterns
Support of polymorphic collections and types and schema based extension is provided by
means of a list of generic meta-attributes that we describe below. Polymorphism in
collections occurs when entities inherit from base entities, for instance a BillingAccount and
SettlementAccount inheriting properties from the abstract Account entity.
Generic support of polymorphism and pattern extensions is described in the TMF API
Guidelines, Part 2 (TMF630).
The @type attribute provides a way to represent the actual class type of an entity. For
example, within a list of Account instances some may be instances of BillingAccount where
other could be instances of SettlementAccount. The @type gives this information. All
resources and sub-resources of this API have a @type attributes that can be provided when
this is useful.
The @referredType can be used within reference entities (like for instance an AccountRef
object) to explicitly denote the actual entity type of the referred class. Notice that in reference
entities the @type, when used, denotes the class type of the reference itself, such as
BillingAccountRef or SettlementAccountRef, and not the class type of the referred object.
However since reference classes are rarely sub-classed, @type is generally not useful in
reference objects.
The @schemaLocation property can be used in resources to allow specifying user-defined
properties of an Entity or to specify the expected characteristics of an entity.
The @baseType attribute gives a way to provide explicitly the base of class of a given
resource that has been extended.


 RESOURCE MODEL
Managed Entity and Task Resource Models
ProductUsage resource
An occurrence of usage on a Product,derived from various Service usages. It is comprised
of characteristics, which represent attributes of service usage.
Resource model


 
Figure 1 - ProductUsage
Field descriptions
ProductUsage fields
bundledProductUsage
A ProductUsageRef. Product Usage reference. An occurrence of
usage on a Product derived from various resource usages.
description
A String. Description of product usage.


 
externalIdentifier
An ExternalIdentifier. An identification of an entity that is owned
by or originates in a software system different from the current
system, for example a ProductOrder handed off from a
commerce platform into an order handling system. The structure
identifies the system itself, the nature of the entity within the
system (e.g. class name) and the unique ID of the entity within
the system. It is anticipated that multiple external IDs can be held
for a single entity, e.g. if the entity passed through multiple
systems on the way to the current system. In this case the
consumer is expected to sequence the IDs in the array in reverse
order of provenance, i.e. most recent system first in the list.
href
A String. Hyperlink reference.
id
A String. Unique identifier.
isBundle
A Boolean. IsBundle determines whether usage represents a
single usage (false), or a bundle of usages specifications (true).
product
A ProductRef. A Product reference.
ratedProductUsage
A RatedProductUsage. An occurrence of employing a product for
its intended purpose with all rating details.
relatedParty
A RelatedPartyRefOrPartyRoleRef. RelatedParty reference. A
related party defines party or party role or its reference, linked to
a specific entity.
resourceUsage
A ResourceUsageRef. ResourceUsage reference.
ResourceUsage is usage event for Resource.
serviceUsage
A ServiceUsageRef. Service Usage reference. An occurrence of
usage on a Service derived from various resource usages.
status
A ProductUsageStatusType. Possible values for the status of the
Product Usage. ENUMERATED with values:
* received
* rejected
* recycled
* guided
* rated
* rerated
* billed
usageCharacteristic
A Characteristic. Describes a given characteristic of an object or
entity through a name/value pair. This is an abstract base class,
the actual value is in one of the strongly-typed subclasses :
StringCharacteristic, ObjectCharacteristic, FloatCharacteristic,
BooleanCharacteristic, NumberCharacteristic,
IntegerCharacteristic, StringArrayCharacteristic,
ObjectArrayCharacteristic, BooleanArrayCharacteristic,
NumberArrayCharacteristic, IntegerArrayCharacteristic…
Characteristic can be instanciated as
* StringCharacteristic
usageDate
A DateTime. Date of usage.


 
usageSpecification
A ProductUsageSpecificationRef. ProductUsageSpecification
reference. ProductUsageSpecification is a detailed description of
a usage event that are of interest to the business and can have
charges applied to it. It is comprised of characteristics, which
define all attributes known for a particular type of usage.
usageType
A String. Type of usage.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ServiceUsageRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. The name of the usage.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ExternalIdentifier sub-resource fields
externalIdentifierType
A String. Type of the identification, typically would be the type of
the entity within the external system.
id
A String. Identification of the entity within the external system.
owner
A String. Name of the external system that owns the entity.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
RatedProductUsage sub-resource fields
bucketValueConvertedInAmount
A Money. A base / value business entity used to represent
money.
isBilled
A Boolean. Boolean indicating if usage have been billed or not.
isTaxExempt
A Boolean. Indicates if the rated amount is exempt of tax.


 
offerTariffType
A String. Type of tariff applied.
ratingAmountType
A String. Type of amount.
ratingDate
A DateTime. Date of usage rating.
taxExcludedRatingAmount
A Money. A base / value business entity used to represent
money.
taxIncludedRatingAmount
A Money. A base / value business entity used to represent
money.
taxRate
A Float. Tax rate.
usageRatingTag
A String. Tag value: [usage]: the usage is always rated outside a
usage bundle [included usage]: the usage is rated inside a usage
bundle [non included usage]: the usage bundle is exhausted.
The usage is rated outside the usage bundle.
Characteristic sub-resource fields
characteristicRelationship
A CharacteristicRelationship. Another Characteristic that is
related to the current Characteristic;.
id
A String. Unique identifier of the characteristic.
name
A String. Name of the characteristic.
valueType
A String. Data type of the value of the characteristic.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
Characteristic can be instanciated as
* StringCharacteristic
value
This property is present in subclasses
StringCharacteristic sub-resource fields
characteristicRelationship
A CharacteristicRelationship. Another Characteristic that is
related to the current Characteristic;.
id
A String. Unique identifier of the characteristic.
name
A String. Name of the characteristic.
value
A String. Value of the characteristic.
valueType
A String. Data type of the value of the characteristic.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.


 
ProductUsageRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
RelatedPartyRefOrPartyRoleRef sub-resource fields
partyOrPartyRole
A PartyRefOrPartyRoleRef.
role
A String. Role played by the related party or party role in the
context of the specific entity it is linked to. Such as 'initiator',
'customer', 'salesAgent', 'user'.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ProductRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ResourceUsageRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.


 
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ProductUsageSpecificationRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
CharacteristicRelationship sub-resource fields
id
A String. Unique identifier of the characteristic.
relationshipType
A String. The type of relationship.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
PartyRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.


 
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
PartyRoleRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
partyId
A String. The identifier of the engaged party that is linked to the
PartyRole object.
partyName
A String. The name of the engaged party that is linked to the
PartyRole object.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
Json representation sample(s)
We provide below a JSON representation as example of the 'ProductUsage' resource object.
{
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {


             "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        },
        {
            "@type": "RelatedPartyOrPartyRoleRef",
            "role": "Organization",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-
api/partyManagement/organization/a396-5c90a41a23ea",
                "id": "a396-5c90a41a23ea"
            }
        }
    ],
    "ratedProductUsage": [
        {
            "isBilled": true,
            "ratingDate": "2024-08-26T12:19:14Z",
            "isTaxExempt": false,
            "taxExcludedRatingAmount": {
                "unit": "EUR",
                "value": 45
            },
            "taxIncludedRatingAmount": {
                "unit": "EUR",
                "value": 50
            },
            "taxRate": 10
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {


         "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
ProductUsageSpecification resource
A detailed description of a Product usage specification that are of interest to the business
and can have charges applied to it. It is comprised of characteristics, which define all
attributes known for a particular type of usage.
Resource model


 
Figure 2 - ProductUsageSpecification
Field descriptions
ProductUsageSpecification fields
attachment
An AttachmentRefOrValue. The polymorphic attributes @type,
@schemaLocation & @referredType are related to the
Attachment entity and not the AttachmentRefOrValue class itself.
bundledProductUsageSpecificatio
n
A ProductUsageSpecificationRef. ProductUsageSpecification
reference. ProductUsageSpecification is a detailed description of
a usage event that are of interest to the business and can have
charges applied to it. It is comprised of characteristics, which
define all attributes known for a particular type of usage.
description
A String. Description of the specification.


 
href
A String. Hyperlink reference.
id
A String. Unique identifier.
isBundle
A Boolean. IsBundle determines whether specification
represents a single specification (false), or a bundle of
specifications (true).
lastUpdate
A DateTime. Date and time of the last update of the specification.
lifecycleStatus
A String. Used to indicate the current lifecycle status of this
catalog item.
name
A String. Name given to the specification.
productSpecification
A ProductSpecificationRef. ProductSpecification reference. A
product Specification represents entities that are orderable from
the provider of the catalog.
productUsageSpecRelationship
A ProductUsageSpecRelationship. A dependency, substitution or
exclusivity relationship between/among product usage
specifications.
resourceUsageSpecification
A ResourceUsageSpecificationRef. ResourceUsageSpecification
reference. ResourceUsageSpecification is a detailed description
of a usage event that are of interest to the business and can
have charges applied to it. It is comprised of characteristics,
which define all attributes known for a particular type of usage.
serviceUsageSpecification
A ServiceUsageSpecificationRef. UsageSpecification reference.
UsageSpecification is a detailed description of a service usage
event that are of interest to the business. It is comprised of
characteristics, which define all attributes known for a particular
type of usage.
specCharacteristic
A CharacteristicSpecification. This class defines a characteristic
specification.
validFor
A TimePeriod. A period of time, either as a deadline
(endDateTime only) a startDateTime only, or both.
version
A String. Specification version.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ResourceUsageSpecificationRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.


 
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ServiceUsageSpecificationRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
CharacteristicSpecification sub-resource fields
charSpecRelationship
A CharacteristicSpecificationRelationship. An aggregation,
migration, substitution, dependency or exclusivity relationship
between/among Characteristic specifications. The specification
characteristic is embedded within the specification whose ID and
href are in this entity, and identified by its ID.
characteristicValueSpecification
A CharacteristicValueSpecification. Specification of a value
(number or text or an object) that can be assigned to a
Characteristic. This is an abstract base class, the actual value is
in one of the strongly-typed subclasses :
BooleanArrayCharacteristicValueSpecification,
BooleanCharacteristicValueSpecification,
FloatArrayCharacteristicValueSpecification,
FloatCharacteristicValueSpecification,
IntegerArrayCharacteristicValueSpecification,
IntegerCharacteristicValueSpecification,
MapArrayCharacteristicValueSpecification,
MapCharacteristicValueSpecification,
NumberArrayCharacteristicValueSpecification,
NumberCharacteristicValueSpecification,
ObjectArrayCharacteristicValueSpecification,
ObjectCharacteristicValueSpecification,
StringArrayCharacteristicValueSpecification,
StringCharacteristicValueSpecification…
configurable
A Boolean. If true, the Boolean indicates that the target
Characteristic is configurable.
description
A String. A narrative that explains the CharacteristicSpecification.


 
extensible
A Boolean. An indicator that specifies that the values for the
characteristic can be extended by adding new values when
instantiating a characteristic for a resource.
id
A String. Unique ID for the characteristic.
isUnique
A Boolean. Specifies if the value of this characteristic is unique
across all entities instantiated from the specification that uses
this characteristic. For example, consider a ProductSpecification
for a set-top box, with a CharacteristicSpecification cardID. Each
set-top box must have a different value for cardID, so this
isUnique attribute would be set to true for the characteristic.
maxCardinality
An Integer. The maximum number of instances a
CharacteristicValue can take on. For example, zero to five phone
numbers in a group calling plan, where five is the value for the
maxCardinality.
minCardinality
An Integer. The minimum number of instances a
CharacteristicValue can take on. For example, zero to five phone
numbers in a group calling plan, where zero is the value for the
minCardinality.
name
A String. A word, term, or phrase by which this characteristic
specification is known and distinguished from other characteristic
specifications.
regex
A String. A rule or principle represented in regular expression
used to derive the value of a characteristic value.
validFor
A TimePeriod. A period of time, either as a deadline
(endDateTime only) a startDateTime only, or both.
valueType
A String. A kind of value that the characteristic can take on, such
as numeric, text and so forth.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
@valueSchemaLocation
A String. This (optional) field provides a link to the schema
describing the value type.
ProductUsageSpecRelationship sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
relationshipType
A String. Type of relationship such as dependency, substitution
or exclusivity.
role
A String. The association role for this service specification.
validFor
A TimePeriod. A period of time, either as a deadline
(endDateTime only) a startDateTime only, or both.


 
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
Attachment sub-resource fields
attachmentType
A String. A business characterization of the purpose of the
attachment, for example logo, instructionManual, contractCopy.
content
A Base64. The actual contents of the attachment object, if
embedded, encoded as base64.
description
A String. A narrative text describing the content of the
attachment.
href
A String. Hyperlink reference.
id
A String. Unique identifier.
mimeType
A String. A technical characterization of the attachment content
format using IETF Mime Types.
name
A String. The name of the attachment.
size
A Quantity. An amount in a given unit.
url
A String. Uniform Resource Locator, is a web page address (a
subset of URI).
validFor
A TimePeriod. A period of time, either as a deadline
(endDateTime only) a startDateTime only, or both.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
AttachmentRef sub-resource fields
description
A String. A narrative text describing the content of the
attachment.
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
url
A String. Link to the attachment media/content.
@baseType
A String. When sub-classing, this defines the super-class.


 
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ProductSpecificationRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
targetProductSchema
A TargetProductSchema. The reference object to the schema
and type of target product which is described by product
specification.
version
A String. Version of the product specification.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
ProductUsageSpecificationRef sub-resource fields
href
A String. Hyperlink reference.
id
A String. Unique identifier.
name
A String. Name of the referred entity.
@baseType
A String. When sub-classing, this defines the super-class.
@referredType
A String. The actual type of the target instance when needed for
disambiguation.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
CharacteristicSpecificationRelationship sub-resource fields
characteristicSpecificationId
A String. Unique identifier of the characteristic within the
specification.
name
A String. Name of the target characteristic within the
specification.


 
parentSpecificationHref
A Uri. Hyperlink reference to the parent specification containing
the target characteristic.
parentSpecificationId
A String. Unique identifier of the parent specification containing
the target characteristic.
relationshipType
A String. Type of relationship such as aggregation, migration,
substitution, dependency, exclusivity.
validFor
A TimePeriod. A period of time, either as a deadline
(endDateTime only) a startDateTime only, or both.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
CharacteristicValueSpecification sub-resource fields
isDefault
A Boolean. If true, the Boolean Indicates if the value is the
default value for a characteristic.
rangeInterval
A String. An indicator that specifies the inclusion or exclusion of
the valueFrom and valueTo attributes. If applicable, possible
values are "open", "closed", "closedBottom" and "closedTop".
regex
A String. A regular expression constraint for given value.
unitOfMeasure
A String. A length, surface, volume, dry measure, liquid measure,
money, weight, time, and the like. In general, a determinate
quantity or magnitude of the kind designated, taken as a
standard of comparison for others of the same kind, in assigning
to them numerical values, as 1 foot, 1 yard, 1 mile, 1 square foot.
validFor
A TimePeriod. A period of time, either as a deadline
(endDateTime only) a startDateTime only, or both.
valueFrom
An Integer. The low range value that a characteristic can take on.
valueTo
An Integer. The upper range value that a characteristic can take
on.
valueType
A String. A kind of value that the characteristic value can take on,
such as numeric, text and so forth.
@baseType
A String. When sub-classing, this defines the super-class.
@schemaLocation
A String. A URI to a JSON-Schema file that defines additional
attributes and relationships.
@type
A String. When sub-classing, this defines the sub-class
Extensible name.
TargetProductSchema sub-resource fields
@schemaLocation
A Uri. This field provides a link to the schema describing the
target product.


 
@type
A String. Class type of the target product.
Json representation sample(s)
We provide below a JSON representation as example of the 'ProductUsageSpecification'
resource object.
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "2.5",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1


         },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"
    }
}
Notification Resource Models
8 notifications are defined for this API.
Notifications related to ProductUsage:
• Create Event
• Delete Event
• Attribute Value Change Event
• State Change Event
Notifications related to ProductUsageSpecification:
• Create Event
• Delete Event
• Attribute Value Change Event
• State Change Event
The notification structure for all notifications in this API follow the pattern depicted by the
figure below. A notification event resource (depicted by "SpecificEvent" placeholder) is a sub
class of a generic Event structure containing at least an id of the event occurrence (eventId),
an event timestamp (eventTime), and the name of the resource (eventType). This notification
structure owns an event payload structure ("SpecificEventPayload" placeholder) linked to the
resource concerned by the notification using the resource name as access field
("resourceName" placeholder).


 
Figure 3 Notification Pattern
ProductUsage
Create Event
Message example for ProductUsageCreateEvent event
Content-Type: application/json
{
    "@type": "ProductUsageCreateEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageCreateEvent",
    "description": "ProductUsageCreateEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {


         "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",
    "eventType": "ProductUsageCreateEvent",
    "event": {
        "usage": {
            "@type": "ProductUsage",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
            "id": "5130d5131a23",
            "usageDate": "2024-08-25T12:19:14Z",
            "status": "billed",
            "usageType": "VOICE",
            "usageCharacteristic": [
                {
                    "@type": "StringCharacteristic",
                    "name": "originatingCountryCode",
                    "valueType": "string",
                    "value": "43"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "destinationCountryCode",
                    "valueType": "string",
                    "value": "49"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "destinationNumber",
                    "valueType": "string",
                    "value": "170123456789"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "duration",
                    "valueType": "string",
                    "value": "20"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "startDateTime",
                    "valueType": "datetime",
                    "value": "2024-08-25T12:19:14Z"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "endDateTime",
                    "valueType": "datetime",
                    "value": "2024-08-25T12:19:34Z"
                }
            ],
            "relatedParty": [
                {
                    "@type": "RelatedPartyRefOrPartyRoleRef",
                    "role": "Individual",
                    "partyOrPartyRole": {
                        "@type": "PartyRef",
                        "href": "http://api.csp.com/tmf-
api/partyManagement/individual/8a41-d6451fe98963",


                         "id": "8a41-d6451fe98963"
                    }
                },
                {
                    "@type": "RelatedPartyRefOrPartyRoleRef",
                    "role": "Organization",
                    "partyOrPartyRole": {
                        "@type": "PartyRef",
                        "href": "http://api.csp.com/tmf-
api/partyManagement/organization/a396-5c90a41a23ea",
                        "id": "a396-5c90a41a23ea"
                    }
                }
            ],
            "product": {
                "@type": "ProductRef",
                "href": "https://api.csp.com/tmf-api//product/qerr-475",
                "id": "qerr-475",
                "name": "Voice product"
            },
            "usageSpecification": {
                "@type": "ProductUsageSpecificationRef",
                "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
                "id": "af59-b504c742900e",
                "name": "VoiceCall"
            }
        }
    }
}
Delete Event
Message example for ProductUsageDeleteEvent event
Content-Type: application/json
{
    "@type": "ProductUsageDeleteEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageDeleteEvent",
    "description": "ProductUsageDeleteEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",


     "eventType": "ProductUsageDeleteEvent",
    "event": {
        "usage": {
            "@type": "ProductUsage",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
            "id": "5130d5131a23"
        }
    }
}
Attribute Value Change Event
Message example for ProductUsageAttributeValueChangeEvent event
Content-Type: application/json
{
    "@type": "ProductUsageAttributeValueChangeEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageAttributeValueChangeEvent",
    "description": "ProductUsageAttributeValueChangeEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",
    "eventType": "ProductUsageAttributeValueChangeEvent",
    "event": {
        "usage": {
            "@type": "ProductUsage",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
            "id": "5130d5131a23",
            "usageCharacteristic": [
                {
                    "@type": "StringCharacteristic",
                    "name": "originatingCountryCode",
                    "valueType": "string",
                    "value": "43"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "destinationCountryCode",
                    "valueType": "string",
                    "value": "49"
                },


                 {
                    "@type": "StringCharacteristic",
                    "name": "destinationNumber",
                    "valueType": "string",
                    "value": "170123456789"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "duration",
                    "valueType": "string",
                    "value": "20"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "startDateTime",
                    "valueType": "datetime",
                    "value": "2024-08-25T12:19:14Z"
                },
                {
                    "@type": "StringCharacteristic",
                    "name": "endDateTime",
                    "valueType": "datetime",
                    "value": "2024-08-25T12:19:34Z"
                }
            ]
        }
    }
}
State Change Event
Message example for ProductUsageStateChangeEvent event with ?fields=state property
only
Content-Type: application/json
{
    "@type": "ProductUsageStateChangeEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageStateChangeEvent",
    "description": "ProductUsageStateChangeEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",


     "eventType": "ProductUsageStateChangeEvent",
    "event": {
        "usage": {
            "@type": "ProductUsage",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
            "id": "5130d5131a23",
            "status": "billed"
        }
    }
}
ProductUsageSpecification
Create Event
Message example for ProductUsageSpecificationCreateEvent event
Content-Type: application/json
{
    "@type": "ProductUsageSpecificationCreateEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageSpecificationCreateEvent",
    "description": "ProductUsageSpecificationCreateEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",
    "eventType": "ProductUsageSpecificationCreateEvent",
    "event": {
        "usageSpecification": {
            "@type": "ProductUsageSpecification",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
            "id": "9aa3-3e7737dd5080",
            "name": "Voice-Call-Specification",
            "description": "Specification for voice calls usage",
            "version": "2.5",
            "specCharacteristic": [
                {
                    "@type": "CharacteristicSpecification",
                    "name": "originatingCountryCode",
                    "valueType": "string",
                    "description": "country code of the caller",


                     "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "originatingNumber",
                    "valueType": "string",
                    "description": "phone number of the caller",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "destinationCountryCode",
                    "valueType": "string",
                    "description": "country code of the called party",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "destinationNumber",
                    "valueType": "string",
                    "description": "phone number of the called party",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "duration",
                    "valueType": "string",
                    "description": "duration of the call",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "startDateTime",
                    "valueType": "dateTime",
                    "description": "startdate and starttime of the call",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "endDateTime",
                    "valueType": "dateTime",
                    "description": "enddate and endtime of the call",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                }
            ],
            "validFor": {
                "startDateTime": "2022-02-20T17:00:00Z",
                "endDateTime": "2099-01-11T00:00:00Z"
            }


         }
    }
}
Delete Event
Message example for ProductUsageSpecificationDeleteEvent event
Content-Type: application/json
{
    "@type": "ProductUsageSpecificationDeleteEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageSpecificationDeleteEvent",
    "description": "ProductUsageSpecificationDeleteEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",
    "eventType": "ProductUsageSpecificationDeleteEvent",
    "event": {
        "usageSpecification": {
            "@type": "ProductUsageSpecification",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
            "id": "9aa3-3e7737dd5080",
            "name": "Voice-Call-Specification"
        }
    }
}
Attribute Value Change Event
Message example for ProductUsageSpecificationAttributeValueChangeEvent event
Content-Type: application/json
{
    "@type": "ProductUsageSpecificationAttributeValueChangeEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageSpecificationAttributeValueChangeEvent",


     "description": "ProductUsageSpecificationAttributeValueChangeEvent
illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",
    "eventType": "ProductUsageSpecificationAttributeValueChangeEvent",
    "event": {
        "usageSpecification": {
            "@type": "ProductUsageSpecification",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
            "id": "9aa3-3e7737dd5080",
            "name": "Voice-Call-Specification",
            "specCharacteristic": [
                {
                    "@type": "CharacteristicSpecification",
                    "name": "originatingCountryCode",
                    "valueType": "string",
                    "description": "country code of the caller",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "originatingNumber",
                    "valueType": "string",
                    "description": "phone number of the caller",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "destinationCountryCode",
                    "valueType": "string",
                    "description": "country code of the called party",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "destinationNumber",
                    "valueType": "string",
                    "description": "phone number of the called party",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },


                 {
                    "@type": "CharacteristicSpecification",
                    "name": "duration",
                    "valueType": "string",
                    "description": "duration of the call",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                },
                {
                    "@type": "CharacteristicSpecification",
                    "name": "startDateTime",
                    "valueType": "dateTime",
                    "description": "startdate and starttime of the call",
                    "configurable": true,
                    "minCardinality": 1,
                    "maxCardinality": 1
                }
            ]
        }
    }
}
State Change Event
Message example for ProductUsageSpecificationStateChangeEvent event
Content-Type: application/json
{
    "@type": "ProductUsageSpecificationStateChangeEvent",
    "@baseType": "Event",
    "correlationId": "fe9b29c9-a31c",
    "domain": "Commercial",
    "title": "ProductUsageSpecificationStateChangeEvent",
    "description": "ProductUsageSpecificationStateChangeEvent illustration",
    "priority": "5",
    "timeOccurred": "2022-08-25T12:19:14Z",
    "source": {
        "@type": "ReportingResource",
        "id": "29",
        "name": "APP-171",
        "@referredType": "LogicalResource"
    },
    "reportingSystem": {
        "@type": "ReportingResource",
        "id": "182",
        "name": "APP-116",
        "@referredType": "LogicalResource"
    },
    "eventId": "4b9d-b37c-204557d70b97",
    "eventTime": "2024-08-25T12:19:14Z",
    "eventType": "ProductUsageSpecificationStateChangeEvent",
    "event": {
        "usageSpecification": {
            "@type": "ProductUsageSpecification",
            "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
            "id": "9aa3-3e7737dd5080",
            "lastUpdate": "2033-06-22T10:36:30.709Z",


             "lifecycleStatus": "active"
        }
    }
}


 API OPERATIONS
Remember the following Uniform Contract:
Operation on Entities
Uniform API Operation
Description
Query Entities
GET Resource
GET must be used to retrieve a
representation of a resource.
Create Entity
POST Resource
POST must be used to create a
new resource
Partial Update of an Entity
PATCH Resource
PATCH must be used to partially
update a resource
Remove an Entity
DELETE Resource
DELETE must be used to
remove a resource
Execute an Action on an Entity
POST on TASK Resource
POST must be used to execute
Task Resources
Other Request Methods
POST on TASK Resource
GET and POST must not be
used to tunnel other request
methods.
Filtering and attribute selection rules are described in the TMF REST Design Guidelines.
Notifications are also described in a subsequent section.
Operations on ProductUsage
Retrieves a ProductUsage by ID
GET /productUsage/{id}?fields=…
Description
This operation retrieves a ProductUsage entity. Attribute selection is enabled for all first level
attributes. Filtering may be available depending on the compliance level supported by an
implementation.
Usage samples
A request for a previous Usage event. The criteria is the Product Usage id 5130d5131a23
Request
GET /productUsage/5130d5131a23
Content-Type: application/json
Response
200


 {
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        },
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Organization",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-


 api/partyManagement/organization/a396-5c90a41a23ea",
                "id": "a396-5c90a41a23ea"
            }
        }
    ],
    "ratedProductUsage": [
        {
            "isBilled": true,
            "ratingDate": "2024-08-26T12:19:14Z",
            "isTaxExempt": false,
            "taxExcludedRatingAmount": {
                "unit": "EUR",
                "value": 45
            },
            "taxIncludedRatingAmount": {
                "unit": "EUR",
                "value": 50
            },
            "taxRate": 10
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
List or find ProductUsage objects
GET /productUsage?fields=…
Description
This operation list ProductUsage entities. Attribute selection is enabled for all first level
attributes. Filtering may be available depending on the compliance level supported by an
implementation.
Usage samples
Retrieving previous Usage details for the usageType of 'Voice'.
Request
GET /productUsage
Content-Type: application/json
Response


 
200
[
  {
    "usageDate": "2024-08-25T12:19:14Z",
    "product": {
      "@type": "ProductRef",
      "name": "Voice product",
      "href": "https://api.csp.com/tmf-api//product/qerr-475",
      "id": "qerr-475"
    },
    "usageSpecification": {
      "@type": "ProductUsageSpecificationRef",
      "name": "VoiceCall",
      "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
      "id": "af59-b504c742900e"
    },
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/bbba-0c6e63171b78",
    "id": "bbba-0c6e63171b78",
    "usageCharacteristic": [
      {
        "@type": "StringCharacteristic",
        "valueType": "string",
        "name": "originatingCountryCode",
        "value": "43"
      },
      {
        "@type": "StringCharacteristic",
        "valueType": "string",
        "name": "destinationCountryCode",
        "value": "49"
      },
      {
        "@type": "StringCharacteristic",
        "valueType": "string",
        "name": "destinationNumber",
        "value": "170123456789"
      },
      {
        "@type": "StringCharacteristic",
        "valueType": "string",
        "name": "duration",
        "value": "20"
      },
      {
        "@type": "StringCharacteristic",
        "valueType": "datetime",
        "name": "startDateTime",
        "value": "2024-08-25T12:19:14Z"
      },
      {
        "@type": "StringCharacteristic",
        "valueType": "datetime",
        "name": "endDateTime",
        "value": "2024-08-25T12:19:34Z"
      }
    ],
    "status": "billed",
    "usageType": "VOICE"
  },


   {
    "usageDate": "2024-08-26T12:19:14Z",
    "product": {
      "@type": "ProductRef",
      "name": "Voice product",
      "href": "https://api.csp.com/tmf-api//product/qerr-475",
      "id": "qerr-475"
    },
    "usageSpecification": {
      "@type": "ProductUsageSpecificationRef",
      "name": "VoiceCall",
      "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
      "id": "af59-b504c742900e"
    },
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/93c2-683ea281566c",
    "id": "93c2-683ea281566c",
    "status": "rerated",
    "usageType": "VOICE"
  }
]
Creates a ProductUsage
POST /productUsage?fields=…
Description
This operation creates a ProductUsage entity.
Mandatory Attributes
Mandatory Attributes
Rule
product
product.@type
product.id
status
usageCharacteristic
usageCharacteristic.@type
usageCharacteristic.name
usageCharacteristic.value
usageDate
@type
Usage samples
Here is an example of a request for creating a specific Usage resource.


 
Request
POST /productUsage
Content-Type: application/json
{
    "@type": "ProductUsage",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        }
    ],
    "product": {


         "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
Response
201
{
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",


             "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
Updates partially a ProductUsage
PATCH /productUsage/{id}?fields=…
Description
This operation allows partial updates of a ProductUsage entity. Support of json/merge
(https://tools.ietf.org/html/rfc7396) is mandatory, support of json/patch (http://tools.ietf.org/
html/rfc5789) is optional. Note: If the update operation yields to the creation of sub-resources
or relationships, the same rules concerning mandatory sub-resource attributes and default
value settings in the POST operation applies to the PATCH operation. Hence these tables
are not repeated here.
Patchable and Non Patchable Attributes
Non Patchable Attributes
Rule
href
id
usageDate
@baseType
@baseType is immutable
@schemaLocation
@schemaLocation is immutable
@type
@type is immutable


 
Patchable Attributes
Rule
bundledProductUsage
description
externalIdentifier
isBundle
product
ratedProductUsage
relatedParty
resourceUsage
serviceUsage
status
usageCharacteristic
usageSpecification
usageType
Usage samples
Here is an example of a request for patching a usage record.
Request
PATCH /productUsage/5130d5131a23
Content-Type: application/json
{
    "@type": "ProductUsage",
    "status": "billed"
}
Response
200
{
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"


         },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        },
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Organization",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-
api/partyManagement/organization/a396-5c90a41a23ea",
                "id": "a396-5c90a41a23ea"
            }
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-


 api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
Here is an example of a request for patching a usage record.
Request
PATCH /productUsage/5130d5131a23
Content-Type: application/merge-patch+json
{
    "@type": "ProductUsage",
    "status": "billed"
}
Response
200
{
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",


             "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        },
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Organization",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-
api/partyManagement/organization/a396-5c90a41a23ea",
                "id": "a396-5c90a41a23ea"
            }
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
Here is an example of a request for patching a usage record.
Request
PATCH /productUsage/5130d5131a23
Content-Type: application/json-patch+json
[
    {
        "op": "replace",
        "path": "/status",
        "value": "billed"


     }
]
Response
200
{
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",
    "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "20"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-


 d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        },
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Organization",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-
api/partyManagement/organization/a396-5c90a41a23ea",
                "id": "a396-5c90a41a23ea"
            }
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",
        "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
Here is an example of a request for patching a usage record.
Request
PATCH /productUsage/5130d5131a23
Content-Type: application/json-patch-query+json
[
    {
        "op": "replace",
        "path": "/usageCharacteristic/value?name=duration",
        "value": "22"
    }
]
Response
200
{
    "@type": "ProductUsage",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsage/5130d5131a23",
    "id": "5130d5131a23",
    "usageDate": "2024-08-25T12:19:14Z",
    "status": "billed",
    "usageType": "VOICE",


     "usageCharacteristic": [
        {
            "@type": "StringCharacteristic",
            "name": "originatingCountryCode",
            "valueType": "string",
            "value": "43"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationCountryCode",
            "valueType": "string",
            "value": "49"
        },
        {
            "@type": "StringCharacteristic",
            "name": "destinationNumber",
            "valueType": "string",
            "value": "170123456789"
        },
        {
            "@type": "StringCharacteristic",
            "name": "duration",
            "valueType": "string",
            "value": "22"
        },
        {
            "@type": "StringCharacteristic",
            "name": "startDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:14Z"
        },
        {
            "@type": "StringCharacteristic",
            "name": "endDateTime",
            "valueType": "datetime",
            "value": "2024-08-25T12:19:34Z"
        }
    ],
    "relatedParty": [
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Individual",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-api/partyManagement/individual/8a41-
d6451fe98963",
                "id": "8a41-d6451fe98963"
            }
        },
        {
            "@type": "RelatedPartyRefOrPartyRoleRef",
            "role": "Organization",
            "partyOrPartyRole": {
                "@type": "PartyRef",
                "href": "http://api.csp.com/tmf-
api/partyManagement/organization/a396-5c90a41a23ea",
                "id": "a396-5c90a41a23ea"
            }
        }
    ],
    "product": {
        "@type": "ProductRef",
        "href": "https://api.csp.com/tmf-api//product/qerr-475",


         "id": "qerr-475",
        "name": "Voice product"
    },
    "usageSpecification": {
        "@type": "ProductUsageSpecificationRef",
        "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/af59-b504c742900e",
        "id": "af59-b504c742900e",
        "name": "VoiceCall"
    }
}
Deletes a ProductUsage
DELETE /productUsage/{id}
Description
This operation deletes a ProductUsage entity.
Operations on ProductUsageSpecification
Retrieves a ProductUsageSpecification by ID
GET /productUsageSpecification/{id}?fields=…
Description
This operation retrieves a ProductUsageSpecification entity. Attribute selection is enabled for
all first level attributes. Filtering may be available depending on the compliance level
supported by an implementation.
Usage samples
A request for a specific ProductUsageSpecification with an id 9aa3-3e7737dd5080
Request
GET /productUsageSpecification/9aa3-3e7737dd5080
Content-Type: application/json
Response
200
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "2.5",


     "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1


         }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"
    }
}
List or find ProductUsageSpecification objects
GET /productUsageSpecification?fields=…
Description
This operation list ProductUsageSpecification entities. Attribute selection is enabled for all
first level attributes. Filtering may be available depending on the compliance level supported
by an implementation.
Usage samples
Retrieving previous UsageSpecifications which are at version 2.5
Request
GET /productUsageSpecification
Content-Type: application/json
Response
200
[
  {
    "validFor": {
      "startDateTime": "2022-02-20T17:00:00Z",
      "endDateTime": "2099-01-11T00:00:00Z"
    },
    "@type": "ProductUsageSpecification",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "specCharacteristic": [
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "string",
        "name": "originatingCountryCode",
        "description": "country code of the caller",
        "configurable": true,
        "maxCardinality": 1
      },
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "string",
        "name": "originatingNumber",
        "description": "phone number of the caller",


         "configurable": true,
        "maxCardinality": 1
      },
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "string",
        "name": "destinationCountryCode",
        "description": "country code of the called party",
        "configurable": true,
        "maxCardinality": 1
      },
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "string",
        "name": "destinationNumber",
        "description": "phone number of the called party",
        "configurable": true,
        "maxCardinality": 1
      },
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "string",
        "name": "duration",
        "description": "duration of the call",
        "configurable": true,
        "maxCardinality": 1
      },
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "dateTime",
        "name": "startDateTime",
        "description": "startdate and starttime of the call",
        "configurable": true,
        "maxCardinality": 1
      },
      {
        "minCardinality": 1,
        "@type": "CharacteristicSpecification",
        "valueType": "dateTime",
        "name": "endDateTime",
        "description": "enddate and endtime of the call",
        "configurable": true,
        "maxCardinality": 1
      }
    ],
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "version": "2.5"
  },
  {
    "validFor": {
      "startDateTime": "2022-02-20T17:00:00Z",
      "endDateTime": "2099-01-11T00:00:00Z"
    },
    "@type": "ProductUsageSpecification",
    "name": "Data-Usage-Specification",
    "description": "Specification of usage of data",
    "specCharacteristic": [{


       "minCardinality": 1,
      "@type": "CharacteristicSpecification",
      "valueType": "number",
      "name": "dataVolume",
      "description": "Data Volume in Mb",
      "configurable": true,
      "maxCardinality": 1
    }],
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/8b64-0cfd1a90c9ed",
    "id": "8b64-0cfd1a90c9ed",
    "version": "2.5"
  }
]
Creates a ProductUsageSpecification
POST /productUsageSpecification?fields=…
Description
This operation creates a ProductUsageSpecification entity.
Mandatory Attributes
Mandatory Attributes
Rule
name
specCharacteristic
specCharacteristic.@type
specCharacteristic.name
specCharacteristic.valueType
@type
Usage samples
Here is an example of a request for creating a specific Product Usage Specification
resource.
Request
POST /productUsageSpecification
Content-Type: application/json
{
    "@type": "ProductUsageSpecification",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "2.5",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",


             "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",


         "endDateTime": "2099-01-11T00:00:00Z"
    }
}
Response
201
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "2.5",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,


             "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"
    }
}
Updates partially a ProductUsageSpecification
PATCH /productUsageSpecification/{id}?fields=…
Description
This operation allows partial updates of a ProductUsageSpecification entity. Support of
json/merge 
(https://tools.ietf.org/html/rfc7396) 
is 
mandatory, 
support 
of 
json/patch
(http://tools.ietf.org/html/rfc5789) is optional. Note: If the update operation yields to the
creation of sub-resources or relationships, the same rules concerning mandatory sub-
resource attributes and default value settings in the POST operation applies to the PATCH
operation. Hence these tables are not repeated here.
Patchable and Non Patchable Attributes
Non Patchable Attributes
Rule
href
id
@baseType
@baseType is immutable
@schemaLocation
@schemaLocation is immutable
@type
@type is immutable
Patchable Attributes
Rule
attachment


 
Patchable Attributes
Rule
bundledProductUsageSpecificatio
n
description
isBundle
lastUpdate
lifecycleStatus
name
productSpecification
productUsageSpecRelationship
resourceUsageSpecification
serviceUsageSpecification
specCharacteristic
validFor
version
Usage samples
Here is an example of a request for patching a ProductUsageSpecification record.
Request
PATCH /productUsageSpecification/9aa3-3e7737dd5080
Content-Type: application/json
{
    "@type": "ProductUsageSpecification",
    "version": "3.2"
}
Response
200
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "3.2",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",


             "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"


     }
}
Here is an example of a request for patching a ProductUsageSpecification record.
Request
PATCH /productUsageSpecification/9aa3-3e7737dd5080
Content-Type: application/merge-patch+json
{
    "@type": "ProductUsageSpecification",
    "version": "3.2"
}
Response
200
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "3.2",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",


             "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"
    }
}
Here is an example of a request for patching a ProductUsageSpecification record.
Request
PATCH /productUsageSpecification/9aa3-3e7737dd5080
Content-Type: application/json-patch+json
[
    {
        "op": "replace",
        "path": "/version",
        "value": "3.0"
    }
]
Response


 
200
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "2.5",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,


             "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "enddate and endtime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"
    }
}
Here is an example of a request for patching a ProductUsageSpecification record.
Request
PATCH /productUsageSpecification/9aa3-3e7737dd5080
Content-Type: application/json-patch-query+json
[
    {
        "op": "replace",
        "path": "/specCharacteristic/description?name=endDateTime",
        "value": "EndDate and EndTime of the call"
    }
]
Response
200
{
    "@type": "ProductUsageSpecification",
    "href": "https://api.csp.com/tmf-
api/productUsageManagement/v5/productUsageSpecification/9aa3-3e7737dd5080",
    "id": "9aa3-3e7737dd5080",
    "name": "Voice-Call-Specification",
    "description": "Specification for voice calls usage",
    "version": "2.5",
    "specCharacteristic": [
        {
            "@type": "CharacteristicSpecification",
            "name": "originatingCountryCode",
            "valueType": "string",
            "description": "country code of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {


             "@type": "CharacteristicSpecification",
            "name": "originatingNumber",
            "valueType": "string",
            "description": "phone number of the caller",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationCountryCode",
            "valueType": "string",
            "description": "country code of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "destinationNumber",
            "valueType": "string",
            "description": "phone number of the called party",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "duration",
            "valueType": "string",
            "description": "duration of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "startDateTime",
            "valueType": "dateTime",
            "description": "startdate and starttime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        },
        {
            "@type": "CharacteristicSpecification",
            "name": "endDateTime",
            "valueType": "dateTime",
            "description": "EndDate and EndTime of the call",
            "configurable": true,
            "minCardinality": 1,
            "maxCardinality": 1
        }
    ],
    "validFor": {
        "startDateTime": "2022-02-20T17:00:00Z",
        "endDateTime": "2099-01-11T00:00:00Z"
    }
}


 
Deletes a ProductUsageSpecification
DELETE /productUsageSpecification/{id}
Description
This operation deletes a ProductUsageSpecification entity.


 API NOTIFICATIONS
For every single of operation on the entities use the following templates and provide sample
REST notification POST calls.
It is assumed that the Pub/Sub uses the Register and UnRegister mechanisms described in
the REST Guidelines reproduced below.
Register listener
POST /hub
Description
Sets the communication endpoint address the service instance must use to deliver
information about its health state, execution state, failures and metrics. Subsequent POST
calls will be rejected by the service if it does not support multiple listeners. In this case
DELETE /api/hub/{id} must be called before an endpoint can be created again.
Behavior
Returns HTTP/1.1 status code 204 if the request was successful.
Returns HTTP/1.1 status code 409 if request is not successful.
Usage Samples
Here’s an example of a request for registering a listener.
Request
POST /api/hub
Accept: application/json
{
    "callback": "http://in.listener.com"
}
Response
201
Content-Type: application/json
Location: /api/hub/42
{
    "id":"42",
    "callback": "http://in.listener.com",
    "query":""
}


 
Unregister listener
DELETE /hub/{id}
Description
Clears the communication endpoint address that was set by creating the Hub..
Behavior
Returns HTTP/1.1 status code 204 if the request was successful.
Returns HTTP/1.1 status code 404 if the resource is not found.
Usage Samples
Here’s an example of a request for un-registering a listener.
Request
DELETE /api/hub/42
Accept: application/json
Response
204
Publish Event to listener
POST /client/listener
Description
Clears the communication endpoint address that was set by creating the Hub.
Provides to a registered listener the description of the event that was raised. The
/client/listener url is the callback url passed when registering the listener.
Behavior
Returns HTTP/1.1 status code 201 if the service is able to set the configuration.
Usage Samples
Here’s an example of a notification received by the listener. In this example “EVENT TYPE”
should be replaced by one of the notification types supported by this API (see Notification
resources Models section) and EVENT BODY refers to the data structure of the given
notification type.
Request


 
POST /client/listener
Accept: application/json
{
    "event": {
        EVENT BODY
    },
    "eventType": "EVENT_TYPE"
}
Response
201
For detailed examples on the general TM Forum notification mechanism, see the TMF REST
Design Guidelines.


 Acknowledgements
Release History
Release
Number
Date
Release led by:
Description
V4.0
July 2021
Kamal
Maghsoudlou/Ericsson,
Kevin McDonnell/Huawei
1st release of the Usage API
v5.0
June 2024
Sergei Lukin/Deutsche
Telekom
migrated to OAS 3.0
Contributors to Document
Kamal Maghsoudlou
Ericsson
Kevin McDonnell
Huawei
Pierre Gauthier
TM Forum
Sergei Lukin
Deutsche Telekom
Uwe Sülter
Deutsche Telekom


