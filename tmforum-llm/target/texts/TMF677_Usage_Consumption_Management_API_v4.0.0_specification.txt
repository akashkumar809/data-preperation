TM Forum 2021. All Rights Reserved.
 
 
TM Forum Specification 
 
 
Usage Consumption Management 
API User Guide 
 
 
 
 
 
 
 
TMF677 
Team Approved Date: 11-Aug-2021 
 
Release Status: Production 
Approval Status: TM Forum Approved 
Version 4.0.0 
IPR Mode: RAND 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 2 of 34 
Notice 
Copyright © TM Forum 2021. All Rights Reserved. 
 
This document and translations of it may be copied and furnished to others, and derivative works that 
comment on or otherwise explain it or assist in its implementation may be prepared, copied, published, 
and distributed, in whole or in part, without restriction of any kind, provided that the above copyright 
notice and this section are included on all such copies and derivative works. However, this document 
itself may not be modified in any way, including by removing the copyright notice or references to TM 
FORUM, except as needed for the purpose of developing any document or deliverable produced by a 
TM FORUM Collaboration Project Team (in which case the rules applicable to copyrights, as set forth 
in the TM FORUM IPR Policy, must be followed) or as required to translate it into languages other than 
English. 
 
The limited permissions granted above are perpetual and will not be revoked by TM FORUM or its 
successors or assigns. 
 
This document and the information contained herein is provided on an "AS IS" basis and TM FORUM 
DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY 
THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY 
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
 
TM FORUM invites any TM FORUM Member or any other party that believes it has patent claims that 
would necessarily be infringed by implementations of this TM Forum Standards Final Deliverable, to 
notify the TM FORUM Team Administrator and provide an indication of its willingness to grant patent 
licenses to such patent claims in a manner consistent with the IPR Mode of the TM FORUM 
Collaboration Project Team that produced this deliverable. 
 
The TM FORUM invites any party to contact the TM FORUM Team Administrator if it is aware of a 
claim of ownership of any patent claims that would necessarily be infringed by implementations of 
this TM FORUM Standards Final Deliverable by a patent holder that is not willing to provide a license 
to such patent claims in a manner consistent with the IPR Mode of the TM FORUM Collaboration 
Project Team that produced this TM FORUM Standards Final Deliverable. TM FORUM may include 
such claims on its website but disclaims any obligation to do so. 
 
TM FORUM takes no position regarding the validity or scope of any intellectual property or other 
rights that might be claimed to pertain to the implementation or use of the technology described in 
this TM FORUM Standards Final Deliverable or the extent to which any license under such rights 
might or might not be available; neither does it represent that it has made any effort to identify any 
such rights. Information on TM FORUM's procedures with respect to rights in any document or 
deliverable produced by a TM FORUM Collaboration Project Team can be found on the TM FORUM 
website. Copies of claims of rights made available for publication and any assurances of licenses to be 
made available, or the result of an attempt made to obtain a general license or permission for the 
use of such proprietary rights by implementers or users of this TM FORUM Standards Final 
Deliverable, can be obtained from the TM FORUM Team Administrator. TM FORUM makes no 
representation that any information or list of intellectual property rights will at any time be 
complete, or that any claims in such list are, in fact, Essential Claims. 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 3 of 34 
Direct inquiries to the TM Forum office: 
 
181 New Road, Suite 304 
Parsippany, NJ 07054 USA 
Tel No. +1 862 227 1648 
TM Forum Web Page: www.tmforum.org 
 
 
 
 
 
 
 
 
 
 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 4 of 34 
Table of Contents 
Notice ....................................................................................................................................................... 2 
Table of Contents ..................................................................................................................................... 4 
List of Tables ....................................................................................................................................... 5 
Introduction .............................................................................................................................................. 6 
Sample Use Cases ..................................................................................................................................... 7 
Support of polymorphism and extension patterns .................................................................................. 9 
Resource Model ...................................................................................................................................... 10 
Task Resource Model ......................................................................................................................... 10 
Query Usage Consumption resource ............................................................................................. 10 
Notification Resource Models ........................................................................................................... 18 
Query Usage Consumption Create Event ....................................................................................... 19 
Query Usage Consumption Delete Event ....................................................................................... 21 
API Operations ........................................................................................................................................ 24 
Operations on Query Usage Consumption ........................................................................................ 24 
List query usage consumptions ...................................................................................................... 24 
Retrieve query usage consumption ............................................................................................... 26 
Create query usage consumption .................................................................................................. 28 
Delete query usage consumption .................................................................................................. 30 
API Notifications ..................................................................................................................................... 31 
Register listener ................................................................................................................................. 31 
Unregister listener ............................................................................................................................. 32 
Publish Event to listener .................................................................................................................... 32 
Acknowledgements ................................................................................................................................ 34 
Version History .................................................................................................................................. 34 
Release History .................................................................................................................................. 34 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 5 of 34 
List of Tables 
N/A 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 6 of 34 
Introduction 
The following document is the user guide of the REST API for Usage Consumption. It includes the model 
definition as well as all available operations. 
 
It describes a single managed resource called QueryUsageConsumption.  
QueryUsageConsumption is a Task Resource. 
QueryUsageConsumption covers the consumption levels of products, services or resources related to 
0 or more parties. And so, we can search for remaining, global or used bucket values, or for exceptional 
consumption normally mentioned as out of bucket consumption. 
There are 3 main changes in this API version: 
• 
Usage Consumption is now described as a TASK resource, 
• 
Usage Consumption Buckets may be linked between each other (aggregated buckets, bundled 
buckets, etc), 
• 
Usage Consumption can be search having in mind services or resources. 
Usage Consumption API provides the following operations: 
• 
List of existing usage consumption queries depending on filter criteria, 
• 
Retrieval of an existing usage consumption query by identifier, 
• 
Creation of a new query of usage consumption, 
• 
Deletion of an existing query of usage consumption, 
• 
Notification of events:  
o QueryUsageConsumption creation, 
o QueryUsageConsumption removal.  


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 7 of 34 
Sample Use Cases 
This section includes a set of main use cases that can be performed with this API. Additional use cases 
can be generated using the operations and resources defined in this specification. 
User case 
Consumer customer opens his/her mobile app to check the remaining data’s 
amount. 
 
Actors 
Customer. 
 
Pre-conditions 
None. 
 
Expected 
outcome 
Remaining amount of data displayed to the customer. 
 
Operation 
POST /queryUsageConsumption 
 
Description 
1. Customer opens mobile app, 
2. Mobile app gets current usage snapshot for customer’ products, 
3. Mobile app displays remaining data value, e.g., 5.3 GB. 
 
Use Case 1 Current data usage for products 
  
User case 
Consumer customer opens web portal to check the number of minutes spent 
in international calls. 
 
Actors 
Customer. 
 
Pre-conditions 
None. 
 
Expected 
outcome 
Used number of international minutes displayed to the customer. 
 
Operation 
POST /queryUsageConsumption 
 
Description 
1. Customer opens web portal, 
2. Web portal gets current usage snapshot for customer’s products, 
3. Web portal presents main tile associated to usage types, 
4. Customer clicks on voice tile, 
5. Web portal displays remaining and used usage for international and 
national voice, e.g., 1000 minutes and 5000 minutes. 
 
Note 
International and national voice are shown as one since they belong to 
the same customer product. 
 
Use Case 2 Current voice usage for products 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 8 of 34 
 
User case 
Agent validates unlimited counters associated to a service. 
 
Actors 
Agent. 
 
Pre-conditions 
None. 
 
Expected 
outcome 
Used number of international minutes displayed to the customer. 
 
Operation 
POST /queryUsageConsumption 
 
Description 
1. Agent opens back-office web portal, 
2. Agent digits service number, 
3. Web portal gets current usage snapshot for this service, 
4. Web portal displays current counts and balances and there are 2 
unlimited counts associated to national calls and messages. 
 
Use Case 3 Current usage for service 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 9 of 34 
Support of polymorphism and extension 
patterns 
Support of polymorphic collections and types and schema based extension is provided by means of a 
list of generic meta-attributes that we describe below. Polymorphism in collections occurs when 
entities inherit from base entities, for instance a BillingAccount and SettlementAccount inheriting 
properties from the abstract Account entity. 
Generic support of polymorphism and pattern extensions is described in the TMF API Guidelines v3.0 
Part 2 document. 
The @type attribute provides a way to represent the actual class type of an entity. For example, within 
a list of Account instances some may be instances of BillingAccount where other could be instances of 
SettlementAccount. The @type gives this information. All resources and sub-resources of this API have 
a @type attributes that can be provided when this is useful. 
The @referredType can be used within reference entities (like for instance an AccountRef object) to 
explicitly denote the actual entity type of the referred class. Notice that in reference entities the 
@type, when used, denotes the class type of the reference itself, such as BillingAccountRef or 
SettlementAccountRef, and not the class type of the referred object. However, since reference classes 
are rarely sub-classed, @type is generally not useful in reference objects. 
The @schemaLocation property can be used in resources to allow specifying user-defined properties 
of an Entity or to specify the expected characteristics of an entity. 
The @baseType attribute gives a way to provide explicitly the base of class of a given resource that has 
been extended. 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 10 of 34 
Resource Model 
Task Resource Model 
Query Usage Consumption resource 
An QueryUsageConsumption allows to manage the calculation request of a usage consumption. 
Query Usage Consumption resource model 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 11 of 34 
Field descriptions 
QueryUsageConsumption fields 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional 
attributes and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible 
name. 
partyAccount 
A list of party account references (PartyAccountRef [*]). A 
reference to the account that owns the bucket. 
queryUsageConsumptionDate A date time (DateTime). Date when the query was submitted. 
relatedParty 
A list of related parties (RelatedParty [*]). Reference and role of 
the related parties for which the usage consumption is requested. 
searchCriteria 
A usage consumption (UsageConsumption). Search structure to 
retrieve current value of usage. 
usageConsumption 
A list of usage consumptions (UsageConsumption [*]). Report with 
current counters and balances. 
 
BucketRefOrValue sub-resource 
A bucket represents and tracks a quantity of usage. It could be either a quantity or an amount in a 
currency.  
It can represent a fixed number of SMS, MMS, call minutes, quantity of data and so on. 
href 
A string. A resource URI pointing to the resource in the OB that stores the 
detailed information for the bucket. 
id 
A string. Unique Identifier within the server for the bucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
bucketCounter 
A list of consumption summaries (ConsumptionSummary [*]). The 
consumption counters (called ConsumptionSummary in the SID model) 
detail for example the different kind of consumption done on the bucket. 
bucketRelationship 
A list of bucket relationships (BucketRelationship [*]). Linked bucket to 
the one instantiate, such as [isAggregated] if the bucket is a part of other 
or [aggregator] is the bucket holds others. 
description 
A string. Text describing the contents of the balance managed by the 
bucket. 
isShared 
A boolean. True if the bucket is shared between several devices or users. 
logicalResource 
A list of usage consumption logical resource references 
(UsageConsumptionLogicalResourceRef [*]). reference to the 
LogicalResource e.g., MSISDN. 
name 
A string. Friendly name to identify the bucket. 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 12 of 34 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account 
that owns the bucket. 
product 
A list of usage consumption product references 
(UsageConsumptionProductRef [*]). 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information 
about any other entity with relation to the balance, for instance to define 
customer hierarchy for the balance (e.g.: customerId, userId, ). 
remainingValue 
A quantity (Quantity). Indicate the amount on the bucket. 
remainingValueName 
A string. Remaining amount in a formatted string for the bucket given in 
the balance unit (for example 1.9 Gb). This formatted string could be used 
for display needs for example. 
reserveBalance 
A list of reserve balance references (ReserveBalanceRef [*]). The 
ReserveBalance resource allows adjustments to be made to the original 
BalanceTopup e.g., increment the amount, alter the recharge periodicity. 
reservedValue 
A quantity (Quantity). Indicate the amount reserved on the bucket; 
should be the sum of all the valid (i.e., confirmed and not consumed or 
expired) amounts in the reserveBalance request array. 
service 
A list of usage consumption service references 
(UsageConsumptionServiceRef [*]). Service reference, for when Service is 
used by other entities. 
status 
A string. status for the bucket. active, expired, suspended. 
usageType 
A string. defines the type of the underlying Balance e.g., data, voice, any 
currency e.g., EUR, USD etc. 
validFor 
A time period. The period for which the balance in the bucket is valid. 
 
BucketRelationship sub-resource 
Linked bucket to the one instantiate, such as [isAggregated] if the bucket is a part of other or 
[aggregator] is the bucket holds others . 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
bucketRefOrValue 
A bucket ref or value (BucketRefOrValue). A bucket (called 
UsageVolumProduct in the SID Model) represents and tracks a quantity of 
usage (remaining or consumed). It could be either a quantity or an 
amount in a currency. It can represent a fixed number of SMS,MMS, call 
minutes, quantity of data and so on. 
relationshipType 
A string. Type of the bucket relationship, such as [isAggregated] if the 
bucket is a part of other or [aggregator] is the bucket holds others. 
 
 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 13 of 34 
ConsumptionSummary sub-resource 
The consumption counters detail for example the different kind of consumption done on the bucket. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
consumptionPeriod 
A time period. Consumption counter period between a start date time 
and an end date time. For prepaid bucket, the period of counters is 
between the start date of the bucket and the effective date of the usage 
consumption report generation. For postpaid bucket, the period of 
counters is between the last bill date and the effective date of the usage 
consumption report generation. 
counterType 
A string. Type of the consumption counter. We can give for example a 
counter of the used value for a bucket (counterType=used for example), 
or the value of the consumption done out of the bucket(s) 
(counterType=outOfBucket for example). 
level 
A string. Counter level. The counter can be given globally for the bucket or 
detailed by user or by network product for example in case of shared 
bucket. 
user 
A related party (RelatedParty). Reference of the user for which the 
consumption counter is detailed. If the level of the counter is global (i.e., 
concerning all the users), the list of them is not specified. It can be found 
through the users listed in the network products of the bucket sub-
resource. 
value 
A quantity (Quantity). Numeric value of the bucket counter in a given unit. 
valueName 
A string. Value of the counter in a formatted string used for display needs 
for example. 
 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for 
disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 14 of 34 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
 
UsageConsumption sub-resource 
A usage consumption enables to know at a given point the balances and the consumption counters 
related to various buckets (SMS, Voice, Data for example). It could be calculated for a device 
identified by a public key (MSISDN number for a mobile device for example or PSTN or VOIP number 
for a fix device), for a subscribed offer or option or for a user. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
bucketRefOrValue 
A list of bucket ref or values (BucketRefOrValue [*]). Bucket(s) included in 
the offer or option subscribed. 
creationDate 
A date time (DateTime). Date and time of the request creation. 
description 
A string. Free short text describing the usage consumption content. 
lastUpdate 
A date time (DateTime). Date when the status was last changed. 
logicalResource 
A list of usage consumption logical resource references 
(UsageConsumptionLogicalResourceRef [*]). reference to the 
LogicalResource e.g., MSISDN. 
name 
A string. Usage consumption name. 
partyAccount 
A list of party account references (PartyAccountRef [*]). A reference to the 
account that owns the bucket. 
product 
A list of usage consumption product references 
(UsageConsumptionProductRef [*]). 
relatedParty 
A list of related parties (RelatedParty [*]). Reference and role of the 
related parties for which the usage consumption is requested. 
service 
A list of usage consumption service references 
(UsageConsumptionServiceRef [*]). Service reference, for when Service is 
used by other entities. 
state 
A task state type (TaskStateType). State of the report defined in the state 
engine. 
validPeriod 
A time period. Validity period. 
 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that 
provides products to the party. 
href 
A string. Reference of the party account. 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 15 of 34 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for 
disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
 
ReserveBalanceRef relationship 
The ReserveBalance resource allows adjustments to be made to the original BalanceTopup e.g., 
increment the amount, alter the recharge periodicity. 
@referredType 
A string. The actual type of the target instance when needed for 
disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
 
UsageConsumptionLogicalResourceRef relationship 
Reference to the LogicalResource e.g., MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for 
disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
consumptionSummary 
A list of consumption summaries (ConsumptionSummary [*]). The 
consumption counters (called ConsumptionSummary in the SID model) 
detail for example the different kind of consumption done on the bucket. 
 
UsageConsumptionProductRef relationship 
Reference to the product, e.g., 5GB Shared Data Package. 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 16 of 34 
@referredType 
A string. The actual type of the target instance when needed for 
disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
consumptionSummary 
A list of consumption summaries (ConsumptionSummary [*]). The 
consumption counters (called ConsumptionSummary in the SID model) 
detail for example the different kind of consumption done on the bucket. 
 
UsageConsumptionServiceRef relationship 
Service reference, for when Service is used by other entities. 
@referredType 
A string. The actual type of the target instance when needed for 
disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes 
and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
consumptionSummary 
A list of consumption summaries (ConsumptionSummary [*]). The 
consumption counters (called ConsumptionSummary in the SID model) 
detail for example the different kind of consumption done on the bucket. 
 
Json representation sample 
Provide below is the json representation of an example of a 'QueryUsageConsumption' resource 
object 
{ 
    "id": "Q1USER11333", 
    "searchCriteria": { 
        "logicalResource": [{ 
                "id": "963161043", 
                "name": "Lara's phone number" 
            }] 
    }, 
    "relatedParty": [{ 
            "id": "USER11333", 
            "role": "agent", 
            "@referredType": "Individual" 
        }], 
    "usageConsumption": [{ 
            "id": "UC1", 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 17 of 34 
            "creationDate": "2021-06-18T16:04:09.084Z", 
            "lastUpdate": "2021-06-18T16:04:09.084Z", 
            "logicalResource": [{ 
                    "id": "963161043", 
                    "name": "Lara's phone number", 
                    "consumptionSummary": [{ 
                            "id": "CT1", 
                            "counterType": "voice", 
                            "level": "global", 
                            "valueName": "Unlimited", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-30T16:04:09.084Z" 
                            } 
                        },{ 
                            "id": "CT2", 
                            "counterType": "sms", 
                            "level": "global", 
                            "valueName": "Unlimited", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-30T16:04:09.084Z" 
                            } 
                        }] 
                }], 
            "bucketRefOrValue": [{ 
                    "id": "BK1", 
                    "description": "Bucket related to MMS", 
                    "isShared": false, 
                    "name": "RED MMS Plus Bucket - MMS", 
                    "usageType": "mms", 
                    "bucketCounter": [{ 
                            "id": "CT3", 
                            "counterType": "used", 
                            "level": "global", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-18T16:04:09.084Z" 
                            }, 
                            "value": { 
                                "amount": 0, 
                                "units": "mms" 
                            } 
                        }], 
                    "product": [{ 
                            "id": "PR1", 
                            "name": "RED MMS Plus" 
                        }], 
                    "relatedParty": [{ 
                            "id": "CUST34", 
                            "role": "Customer", 
                            "@referredType": "Individual" 
                        }] 
                },{ 
                    "id": "BK2", 
                    "description": "Bucket related to data", 
                    "isShared": false, 
                    "name": "RED Data Plus Bucket - Data", 
                    "remainingValue": { 
                        "amount": 3, 
                        "units": "GB" 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 18 of 34 
                    }, 
                    "remainingValueName": "3 GB", 
                    "usageType": "data", 
                    "bucketCounter": [{ 
                            "id": "CT4", 
                            "counterType": "used", 
                            "level": "global", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-18T16:04:09.084Z" 
                            }, 
                            "value": { 
                                "amount": 2, 
                                "units": "GB" 
                            } 
                        }], 
                    "product": [{ 
                            "id": "PR2", 
                            "name": "RED Data Plus" 
                        }], 
                    "relatedParty": [{ 
                            "id": "CUST34", 
                            "role": "Customer", 
                            "@referredType": "Individual" 
                        } 
                    ] 
                }] 
        }] 
} 
Notification Resource Models 
2 notifications are defined for this API 
Notifications related to QueryUsageConsumption: 
    - QueryUsageConsumptionCreateEvent 
    - QueryUsageConsumptionDeleteEvent 
The notification structure for all notifications in this API follow the pattern depicted by the figure 
below. 
A notification event resource (depicted by "SpecificEvent" placeholder) is a sub class of a generic 
Event structure containing at least an id of the event occurrence (eventId), an event timestamp 
(eventTime), and the name of the resource (eventType).  
This notification structure owns an event payload structure ("SpecificEventPayload" placeholder) 
linked to the resource concerned by the notification using the resource name as access field 
("resourceName" placeholder). 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 19 of 34 
 
 
Query Usage Consumption Create Event 
Notification QueryUsageConsumptionCreateEvent case for resource QueryUsageConsumption 
Json representation sample 
Provide below is the json representation of an example of a 'QueryUsageConsumptionCreateEvent' 
notification event object 
{ 
 
"eventId": "00001", 
 
"eventTime": "2021-11-16T16:42:25-04:00", 
 
"eventType": "QueryUsageConsumptionCreateEvent", 
 
"event": { 
 
 
"queryUsageConsumption": { 
 
 
 
"id": "Q1USER11333", 
 
 
 
"searchCriteria": { 
 
 
 
 
"logicalResource": [{ 
 
 
 
 
 
"id": "963161043", 
 
 
 
 
 
"name": "Lara's phone number" 
 
 
 
 
}] 
 
 
 
}, 
 
 
 
"relatedParty": [{ 
 
 
 
 
"id": "USER11333", 
 
 
 
 
"role": "agent", 
 
 
 
 
"@referredType": "Individual" 
 
 
 
}], 
 
 
 
"usageConsumption": [{ 
 
 
 
 
"id": "UC1", 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 20 of 34 
 
 
 
 
"creationDate": "2021-06-18T16:04:09.084Z", 
 
 
 
 
"lastUpdate": "2021-06-18T16:04:09.084Z", 
 
 
 
 
"logicalResource": [{ 
 
 
 
 
 
"id": "963161043", 
 
 
 
 
 
"name": "Lara's phone number", 
 
 
 
 
 
"consumptionSummary": [{ 
 
 
 
 
 
 
"id": "CT1", 
 
 
 
 
 
 
"counterType": "voice", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"valueName": "Unlimited", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-30T16:04:09.084Z" 
 
 
 
 
 
 
}}, { 
 
 
 
 
 
 
"id": "CT2", 
 
 
 
 
 
 
"counterType": "sms", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"valueName": "Unlimited", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-30T16:04:09.084Z" 
 
 
 
 
 
 
}}] 
 
 
 
 
}], 
 
 
 
 
"bucketRefOrValue": [{ 
 
 
 
 
 
"id": "BK1", 
 
 
 
 
 
"description": "Bucket related to MMS", 
 
 
 
 
 
"isShared": false, 
 
 
 
 
 
"name": "RED MMS Plus Bucket - MMS", 
 
 
 
 
 
"usageType": "mms", 
 
 
 
 
 
"bucketCounter": [{ 
 
 
 
 
 
 
"id": "CT3", 
 
 
 
 
 
 
"counterType": "used", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-18T16:04:09.084Z" 
 
 
 
 
 
 
},"value": { 
 
 
 
 
 
 
 
"amount": 0, 
 
 
 
 
 
 
 
"units": "mms" 
 
 
 
 
 
 
} 
 
 
 
 
 
}], 
 
 
 
 
 
"product": [{ 
 
 
 
 
 
 
"id": "PR1", 
 
 
 
 
 
 
"name": "RED MMS Plus" 
 
 
 
 
 
}], 
 
 
 
 
 
"relatedParty": [{ 
 
 
 
 
 
 
"id": "CUST34", 
 
 
 
 
 
 
"role": "Customer", 
 
 
 
 
 
 
"@referredType": "Individual" 
 
 
 
 
 
}] 
 
 
 
 
}, { 
 
 
 
 
 
"id": "BK2", 
 
 
 
 
 
"description": "Bucket related to data", 
 
 
 
 
 
"isShared": false, 
 
 
 
 
 
"name": "RED Data Plus Bucket - Data", 
 
 
 
 
 
"remainingValue": { 
 
 
 
 
 
 
"amount": 3, 
 
 
 
 
 
 
"units": "GB" 
 
 
 
 
 
}, 
 
 
 
 
 
"remainingValueName": "3 GB", 
 
 
 
 
 
"usageType": "data", 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 21 of 34 
 
 
 
 
 
"bucketCounter": [{ 
 
 
 
 
 
 
"id": "CT4", 
 
 
 
 
 
 
"counterType": "used", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-18T16:04:09.084Z" 
 
 
 
 
 
 
},"value": { 
 
 
 
 
 
 
 
"amount": 2, 
 
 
 
 
 
 
 
"units": "GB" 
 
 
 
 
 
 
} 
 
 
 
 
 
}], 
 
 
 
 
 
"product": [{ 
 
 
 
 
 
 
"id": "PR2", 
 
 
 
 
 
 
"name": "RED Data Plus" 
 
 
 
 
 
}], 
 
 
 
 
 
"relatedParty": [{ 
 
 
 
 
 
 
"id": "CUST34", 
 
 
 
 
 
 
"role": "Customer", 
 
 
 
 
 
 
"@referredType": "Individual" 
 
 
 
 
 
}] 
 
 
 
 
}] 
 
 
 
} 
] 
} 
} 
} 
 
Query Usage Consumption Delete Event 
Notification QueryUsageConsumptionDeleteEvent case for resource QueryUsageConsumption 
Json representation sample 
Provided below is the json representation of an example of a 'QueryUsageConsumptionDeleteEvent' 
notification event object 
{ 
 
"eventId": "00001", 
 
"eventTime": "2021-11-16T16:42:25-04:00", 
 
"eventType": "QueryUsageConsumptionDeleteEvent", 
 
"event": { 
 
 
"queryUsageConsumption": { 
 
 
 
"id": "Q1USER11333", 
 
 
 
"searchCriteria": { 
 
 
 
 
"logicalResource": [{ 
 
 
 
 
 
"id": "963161043", 
 
 
 
 
 
"name": "Lara's phone number" 
 
 
 
 
}] 
 
 
 
},"relatedParty": [{ 
 
 
 
 
"id": "USER11333", 
 
 
 
 
"role": "agent", 
 
 
 
 
"@referredType": "Individual" 
 
 
 
}],"usageConsumption": [{ 
 
 
 
 
"id": "UC1", 
 
 
 
 
"creationDate": "2021-06-18T16:04:09.084Z", 
 
 
 
 
"lastUpdate": "2021-06-18T16:04:09.084Z", 
 
 
 
 
"logicalResource": [{ 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 22 of 34 
 
 
 
 
 
"id": "963161043", 
 
 
 
 
 
"name": "Lara's phone number", 
 
 
 
 
 
"consumptionSummary": [{ 
 
 
 
 
 
 
"id": "CT1", 
 
 
 
 
 
 
"counterType": "voice", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"valueName": "Unlimited", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-30T16:04:09.084Z" 
 
 
 
 
 
 
}}, { 
 
 
 
 
 
 
"id": "CT2", 
 
 
 
 
 
 
"counterType": "sms", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"valueName": "Unlimited", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-30T16:04:09.084Z" 
 
 
 
 
 
 
}}] 
 
 
 
 
}], 
 
 
 
 
"bucketRefOrValue": [{ 
 
 
 
 
 
"id": "BK1", 
 
 
 
 
 
"description": "Bucket related to MMS", 
 
 
 
 
 
"isShared": false, 
 
 
 
 
 
"name": "RED MMS Plus Bucket - MMS", 
 
 
 
 
 
"usageType": "mms", 
 
 
 
 
 
"bucketCounter": [{ 
 
 
 
 
 
 
"id": "CT3", 
 
 
 
 
 
 
"counterType": "used", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-18T16:04:09.084Z" 
 
 
 
 
 
 
},"value": { 
 
 
 
 
 
 
 
"amount": 0, 
 
 
 
 
 
 
 
"units": "mms" 
 
 
 
 
 
 
} 
 
 
 
 
 
}],"product": [{ 
 
 
 
 
 
 
"id": "PR1", 
 
 
 
 
 
 
"name": "RED MMS Plus" 
 
 
 
 
 
}],"relatedParty": [{ 
 
 
 
 
 
 
"id": "CUST34", 
 
 
 
 
 
 
"role": "Customer", 
 
 
 
 
 
 
"@referredType": "Individual" 
 
 
 
 
 
}] 
 
 
 
 
}, { 
 
 
 
 
 
"id": "BK2", 
 
 
 
 
 
"description": "Bucket related to data", 
 
 
 
 
 
"isShared": false, 
 
 
 
 
 
"name": "RED Data Plus Bucket - Data", 
 
 
 
 
 
"remainingValue": { 
 
 
 
 
 
 
"amount": 3, 
 
 
 
 
 
 
"units": "GB" 
 
 
 
 
 
}, 
 
 
 
 
 
"remainingValueName": "3 GB", 
 
 
 
 
 
"usageType": "data", 
 
 
 
 
 
"bucketCounter": [{ 
 
 
 
 
 
 
"id": "CT4", 
 
 
 
 
 
 
"counterType": "used", 
 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
 
"consumptionPeriod": { 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 23 of 34 
 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
 
"startDateTime": "2021-06-18T16:04:09.084Z" 
 
 
 
 
 
 
},"value": { 
 
 
 
 
 
 
 
"amount": 2, 
 
 
 
 
 
 
 
"units": "GB" 
 
 
 
 
 
 
} 
 
 
 
 
 
}],"product": [{ 
 
 
 
 
 
 
"id": "PR2", 
 
 
 
 
 
 
"name": "RED Data Plus" 
 
 
 
 
 
}],"relatedParty": [{ 
 
 
 
 
 
 
"id": "CUST34", 
 
 
 
 
 
 
"role": "Customer", 
 
 
 
 
 
 
"@referredType": "Individual" 
 
 
 
 
 
}] 
}] 
 
 
 
}] 
}}} 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 24 of 34 
 API Operations 
Remember the following Uniform Contract: 
Operation on Entities 
Uniform API Operation 
Description 
Query Entities 
GET Resource 
GET must be used to retrieve a 
representation of a resource. 
Create Entity 
POST Resource 
POST must be used to create a new resource 
Partial Update of an Entity 
PATCH Resource 
PATCH must be used to partially update a 
resource 
Complete Update of an 
Entity 
PUT Resource 
PUT must be used to completely update a 
resource identified by its resource URI  
Remove an Entity 
DELETE Resource 
DELETE must be used to remove a resource 
Execute an Action on an 
Entity  
POST on TASK Resource 
POST must be used to execute Task 
Resources 
Other Request Methods 
POST on TASK Resource 
GET and POST must not be used to tunnel 
other request methods. 
 
Filtering and attribute selection rules are described in the TMF REST Design Guidelines. 
Notifications are also described in a subsequent section. 
 
Operations on Query Usage Consumption 
List query usage consumptions 
  GET /queryUsageConsumption?fields=...&{filtering} 
Description 
This operation list query usage consumption entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 25 of 34 
Usage Samples 
Here's an example of a request for retrieving QueryUsageConsumption resources. 
Request 
GET /tmf-
api/usageConsumption/v4/queryUsageConsumption?relatedParty[?(@referredType==Individual)].id=USER11333 
Accept: application/json 
 
Response 
200 OK 
[{ 
 
"id": "Q1USER11222", 
 
"relatedParty": [{ 
 
 
"id": "USER11222", 
 
 
"role": "agent", 
 
 
"@referredType": "Individual" 
 
}], 
 
"searchCriteria": { 
 
 
"bucketRefOrValue": [{ 
 
 
 
"usageType": "voice national" 
 
 
}, { 
 
 
 
"usageType": "voice international" 
 
 
}, { 
 
 
 
"usageType": "data" 
 
 
}] 
 
} 
}, { 
 
"id": "Q2USER11222", 
 
"relatedParty": [{ 
 
 
"id": "USER11222", 
 
 
"role": "agent", 
 
 
"@referredType": "Individual" 
 
}], 
 
"searchCriteria": { 
 
 
"logicalResource": [{ 
 
 
 
"id": "963161043", 
 
 
 
"name": "Lara's phone number" 
 
 
}] 
 
} 
}, { 
 
"id": "Q3USER11222", 
 
"relatedParty": [{ 
 
 
"id": "USER11222", 
 
 
"role": "agent", 
 
 
"@referredType": "Individual" 
 
}], 
 
"searchCriteria": { 
 
 
"partyAccount": [{ 
 
 
 
"id": "BI12234", 
 
 
 
"@referredType": "Billing Account" 
 
 
}] 
 
} 
}] 
 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 26 of 34 
Retrieve query usage consumption 
  GET /queryUsageConsumption/{id}?fields=...&{filtering} 
Description 
This operation retrieves a query usage consumption entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an 
implementation. 
 
Usage Samples 
Here's an example of a request for retrieving a QueryUsageConsumption resource. 
Request 
GET /tmf-api/usageConsumption/v4/queryUsageConsumption/Q1USER11333 
Accept: application/json 
 
Response 
 
200 OK 
 
{ 
    "id": "Q1USER11333", 
    "searchCriteria": { 
        "logicalResource": [{ 
                "id": "963161043", 
                "name": "Lara's phone number" 
            }] 
    }, 
    "relatedParty": [{ 
            "id": "USER11333", 
            "role": "agent", 
            "@referredType": "Individual" 
        }], 
    "usageConsumption": [{ 
            "id": "UC1", 
            "creationDate": "2021-06-18T16:04:09.084Z", 
            "lastUpdate": "2021-06-18T16:04:09.084Z", 
            "logicalResource": [{ 
                    "id": "963161043", 
                    "name": "Lara's phone number", 
                    "consumptionSummary": [ { 
                            "id": "CT1", 
                            "counterType": "voice", 
                            "level": "global", 
                            "valueName": "Unlimited", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-30T16:04:09.084Z" 
                            } 
                        },{ 
                            "id": "CT2", 
                            "counterType": "sms", 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 27 of 34 
                            "level": "global", 
                            "valueName": "Unlimited", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-30T16:04:09.084Z" 
                            } 
                        }] 
                }], 
            "bucketRefOrValue": [{ 
                    "id": "BK1", 
                    "description": "Bucket related to MMS", 
                    "isShared": false, 
                    "name": "RED MMS Plus Bucket - MMS", 
                    "usageType": "mms", 
                    "bucketCounter": [{ 
                            "id": "CT3", 
                            "counterType": "used", 
                            "level": "global", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-18T16:04:09.084Z" 
                            }, 
                            "value": { 
                                "amount": 0, 
                                "units": "mms" 
                            } 
                        }], 
                    "product": [{ 
                            "id": "PR1", 
                            "name": "RED MMS Plus" 
                        }], 
                    "relatedParty": [{ 
                            "id": "CUST34", 
                            "role": "Customer", 
                            "@referredType": "Individual" 
                        }] 
                },{ 
                    "id": "BK2", 
                    "description": "Bucket related to data", 
                    "isShared": false, 
                    "name": "RED Data Plus Bucket - Data", 
                    "remainingValue": { 
                        "amount": 3, 
                        "units": "GB" 
                    }, 
                    "remainingValueName": "3 GB", 
                    "usageType": "data", 
                    "bucketCounter": [{ 
                            "id": "CT4", 
                            "counterType": "used", 
                            "level": "global", 
                            "consumptionPeriod": { 
                                "endDateTime": "2021-06-01T16:04:09.084Z", 
                                "startDateTime": "2021-06-18T16:04:09.084Z" 
                            }, 
                            "value": { 
                                "amount": 2, 
                                "units": "GB" 
                            } 
                        }], 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 28 of 34 
                    "product": [{ 
                            "id": "PR2", 
                            "name": "RED Data Plus" 
                        }], 
                    "relatedParty": [{ 
                            "id": "CUST34", 
                            "role": "Customer", 
                            "@referredType": "Individual" 
                        }] 
                }] 
        }]} 
 
Create query usage consumption 
  POST /queryUsageConsumption 
Description 
This operation creates a query usage consumption entity. 
Mandatory and Non Mandatory Attributes 
The following tables provide the list of mandatory and non mandatory attributes when creating a 
QueryUsageConsumption, including any possible rule conditions and applicable default values.  
Notice that it is up to an implementer to add additional mandatory attributes. 
Mandatory Attributes 
Rule 
searchCriteria 
Must have at least one of these. 
partyAccount 
relatedParty 
 
Non Mandatory Attributes 
Rule 
@baseType 
Only required if the resource is extended. 
@schemaLocation 
@type 
queryUsageConsumptionDate 
N/A 
usageConsumption 
 
Usage Samples 
Here's an example of a request for creating a QueryUsageConsumption resource. In this example the 
request only passes mandatory attributes. 
Request 
POST /tmf-api/usageConsumption/v4/queryUsageConsumption 
Content-Type: application/json 
{ 
    "searchCriteria": { 
        "logicalResource": [ { 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 29 of 34 
                "id": "963161043", 
                "name": "Lara's phone number" 
            }] 
    } 
} 
Response 
201 Created 
 
{ 
 
"id": "Q1USER11333", 
 
"searchCriteria": { 
 
 
"logicalResource": [{ 
 
 
 
"id": "963161043", 
 
 
 
"name": "Lara's phone number" 
 
 
}]}, 
 
"usageConsumption": [{ 
 
 
"id": "UC1", 
 
 
"creationDate": "2021-06-18T16:04:09.084Z", 
 
 
"lastUpdate": "2021-06-18T16:04:09.084Z", 
 
 
"logicalResource": [{ 
 
 
 
"id": "963161043", 
 
 
 
"name": "Lara's phone number", 
 
 
 
"consumptionSummary": [{ 
 
 
 
 
 
"id": "CT1", 
 
 
 
 
 
"counterType": "voice", 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
"valueName": "Unlimited", 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
"startDateTime": "2021-06-30T16:04:09.084Z" 
 
 
 
 
 
}},{ 
 
 
 
 
 
"id": "CT2", 
 
 
 
 
 
"counterType": "sms", 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
"valueName": "Unlimited", 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
"startDateTime": "2021-06-30T16:04:09.084Z" 
 
 
 
 
 
} 
 
 
 
 
}] 
}], 
 
 
"bucketRefOrValue": [{ 
 
 
 
 
"id": "BK1", 
 
 
 
 
"description": "Bucket related to MMS", 
 
 
 
 
"isShared": false, 
 
 
 
 
"name": "RED MMS Plus Bucket - MMS", 
 
 
 
 
"usageType": "mms", 
 
 
 
 
"bucketCounter": [{ 
 
 
 
 
 
"id": "CT3", 
 
 
 
 
 
"counterType": "used", 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
"startDateTime": "2021-06-18T16:04:09.084Z" 
 
 
 
 
 
},"value": { 
 
 
 
 
 
 
"amount": 0, 
 
 
 
 
 
 
"units": "mms" 
 
 
 
 
 
}}], 
 
 
 
 
"product": [{ 
 
 
 
 
 
"id": "PR1", 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 30 of 34 
 
 
 
 
 
"name": "RED MMS Plus" 
 
 
 
 
}], 
 
 
 
 
"relatedParty": [{ 
 
 
 
 
 
"id": "CUST34", 
 
 
 
 
 
"role": "Customer", 
 
 
 
 
 
"@referredType": "Individual" 
 
 
 
 
}]},{ 
 
 
 
 
"id": "BK2", 
 
 
 
 
"description": "Bucket related to data", 
 
 
 
 
"isShared": false, 
 
 
 
 
"name": "RED Data Plus Bucket - Data", 
 
 
 
 
"remainingValue": { 
 
 
 
 
 
"amount": 3, 
 
 
 
 
 
"units": "GB" 
 
 
 
 
}, 
 
 
 
 
"remainingValueName": "3 GB", 
 
 
 
 
"usageType": "data", 
 
 
 
 
"bucketCounter": [{ 
 
 
 
 
 
"id": "CT4", 
 
 
 
 
 
"counterType": "used", 
 
 
 
 
 
"level": "global", 
 
 
 
 
 
"consumptionPeriod": { 
 
 
 
 
 
 
"endDateTime": "2021-06-01T16:04:09.084Z", 
 
 
 
 
 
 
"startDateTime": "2021-06-18T16:04:09.084Z" 
 
 
 
 
 
},"value": { 
 
 
 
 
 
 
"amount": 2, 
 
 
 
 
 
 
"units": "GB" 
 
 
 
 
 
} 
 
 
 
 
}], product": [{ 
 
 
 
 
 
"id": "PR2", 
 
 
 
 
 
"name": "RED Data Plus" 
 
 
 
 
}],"relatedParty": [{ 
 
 
 
 
 
"id": "CUST34", 
 
 
 
 
 
"role": "Customer", 
 
 
 
 
 
"@referredType": "Individual" 
 
 
 
 
}] 
 
 
 
}] 
                        } 
]} 
Delete query usage consumption 
  DELETE /queryUsageConsumption/{id} 
Description 
This operation deletes a query usage consumption entity. 
Usage Samples 
Here's an example of a request for deleting a QueryUsageConsumption resource. 
Request 
DELETE /tmf-api/usageConsumption/v4/queryUsageConsumption/42 
Response 
204 Deleted 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 31 of 34 
API Notifications 
For every single of operation on the entities use the following templates and provide sample REST 
notification POST calls. 
It is assumed that the Pub/Sub uses the Register and UnRegister mechanisms described in the REST 
Guidelines reproduced below. 
Register listener 
  POST /hub 
Description 
Sets the communication endpoint address the service instance must use to deliver information about 
its health state, execution state, failures and metrics. Subsequent POST calls will be rejected by the 
service if it does not support multiple listeners. In this case DELETE /api/hub/{id} must be called 
before an endpoint can be created again. 
 
Behavior 
Returns HTTP/1.1 status code 204 if the request was successful. 
Returns HTTP/1.1 status code 409 if request is not successful. 
 
Usage Samples 
Here's an example of a request for registering a listener. 
Request 
POST /api/hub 
Accept: application/json 
 
{"callback": "http://in.listener.com"} 
 
Response 
201 Created 
Content-Type: application/json 
Location: /api/hub/42 
 
{"id":"42","callback":"http://in.listener.com","query":null} 
 
 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 32 of 34 
Unregister listener 
  DELETE /hub/{id} 
Description 
Clears the communication endpoint address that was set by creating the Hub. 
 
Behavior 
Returns HTTP/1.1 status code 204 if the request was successful. 
Returns HTTP/1.1 status code 404 if the resource is not found. 
 
Usage Samples 
Here's an example of a request for un-registering a listener. 
Request 
DELETE /api/hub/42 
Accept: application/json 
 
Response 
204 Deleted 
 
Publish Event to listener 
  POST /client/listener 
Description 
Clears the communication endpoint address that was set by creating the Hub. 
Provides to a registered listener the description of the event that was raised. The 
/client/listener url is the callback url passed when registering the listener. 
 
Behavior 
Returns HTTP/1.1 status code 201 if the service is able to set the configuration.  
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 33 of 34 
Usage Samples 
Here's an example of a notification received by the listener. In this example “EVENT TYPE” should be 
replaced by one of the notification types supported by this API (see Notification resources Models 
section) and EVENT BODY refers to the data structure of the given notification type. 
Request 
POST /client/listener 
Accept: application/json 
 
{ 
    "event": {  
                EVENT BODY  
            }, 
    "eventType": "EVENT_TYPE" 
} 
 
Response 
201 Created 
 
For detailed examples on the general TM Forum notification mechanism, see the TMF REST Design 
Guidelines. 
 
 
 


© TM Forum 2021. All Rights Reserved                                                                                                                                Page 34 of 34 
Acknowledgements 
Version History 
Version Number 
Date  
Release led by: 
Description  
Release 1.0 
04/15/2017 
Pierre Gauthier, TM Forum 
pgauthier@tmforum.org 
 
Mariano Belaunde, Orange Labs 
Mariano.belaunde@orange.com 
 
First Release of the Document.  
Release 2.0 
11/06/2018 
Mariano Belaunde, Orange Labs 
Alignment with Guidelines 3.0 
Release 3.0 
04/08/2021 
Lara Silva, Vodafone 
lara.silva3@vodafone.com 
Alignment with guidelines 4.0.2 
 
Release 4.0.0 
11-Aug-2021 
Lara Silva, Vodafone 
 
 
Release History 
Release Status 
Date  
Release led by: 
Description  
Release 17.5 
15-Apr-2017 
Pierre Gauthier, TM Forum 
Mariano Belaunde, Orange Labs 
First Release of the Document.  
Pre-production 
11-Aug-2021 
Lara Silva, Vodafone 
 
 
Production 
19-Nov-2021 
Adrienne Walcott 
Updated to reflect TM Forum 
Approved Status 
   


