 
TM Forum 2020. All Rights Reserved. 
C2 General 
 
 
 
TM Forum Specification 
 
 
Prepay Balance Management API 
User Guide 
 
 
 
 
 
TMF654 
Team Approved Date: 29-Jul-2020 
 
 
Release Status: Production 
Approval Status: TM Forum Approved 
Version 4.0.0 
IPR Mode: RAND 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 2 of 135 
Notice 
Copyright © TM Forum 2020. All Rights Reserved. 
 
This document and translations of it may be copied and furnished to others, and derivative works that comment on 
or otherwise explain it or assist in its implementation may be prepared, copied, published, and distributed, in 
whole or in part, without restriction of any kind, provided that the above copyright notice and this section are 
included on all such copies and derivative works. However, this document itself may not be modified in any way, 
including by removing the copyright notice or references to TM FORUM, except as needed for the purpose of 
developing any document or deliverable produced by a TM FORUM Collaboration Project Team (in which case the 
rules applicable to copyrights, as set forth in the TM FORUM IPR Policy, must be followed) or as required to 
translate it into languages other than English. 
 
The limited permissions granted above are perpetual and will not be revoked by TM FORUM or its successors or 
assigns. 
 
This document and the information contained herein is provided on an "AS IS" basis and TM FORUM DISCLAIMS 
ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE 
INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF 
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
 
TM FORUM invites any TM FORUM Member or any other party that believes it has patent claims that would 
necessarily be infringed by implementations of this TM Forum Standards Final Deliverable, to notify the TM FORUM 
Team Administrator and provide an indication of its willingness to grant patent licenses to such patent claims in a 
manner consistent with the IPR Mode of the TM FORUM Collaboration Project Team that produced this deliverable. 
 
The TM FORUM invites any party to contact the TM FORUM Team Administrator if it is aware of a claim of 
ownership of any patent claims that would necessarily be infringed by implementations of this TM FORUM 
Standards Final Deliverable by a patent holder that is not willing to provide a license to such patent claims in a 
manner consistent with the IPR Mode of the TM FORUM Collaboration Project Team that produced this TM FORUM 
Standards Final Deliverable. TM FORUM may include such claims on its website but disclaims any obligation to do 
so. 
 
TM FORUM takes no position regarding the validity or scope of any intellectual property or other rights that might 
be claimed to pertain to the implementation or use of the technology described in this TM FORUM Standards Final 
Deliverable or the extent to which any license under such rights might or might not be available; neither does it 
represent that it has made any effort to identify any such rights. Information on TM FORUM's procedures with 
respect to rights in any document or deliverable produced by a TM FORUM Collaboration Project Team can be 
found on the TM FORUM website. Copies of claims of rights made available for publication and any assurances of 
licenses to be made available, or the result of an attempt made to obtain a general license or permission for the 
use of such proprietary rights by implementers or users of this TM FORUM Standards Final Deliverable, can be 
obtained from the TM FORUM Team Administrator. TM FORUM makes no representation that any information or 
list of intellectual property rights will at any time be complete, or that any claims in such list are, in fact, Essential 
Claims. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 3 of 135 
Direct inquiries to the TM Forum office: 
 
4 Century Drive, Suite 100 
Parsippany, NJ 07054, USA 
Tel No. +1 973 944 5100 
Fax No. +1 973 998 7916 
TM Forum Web Page: www.tmforum.org 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 4 of 135 
Table of Contents 
Table of Contents ............................................................................................................................................................ 4 
List of Tables ................................................................................................................................................................... 7 
Introduction ..................................................................................................................................................................... 8 
SAMPLE USE CASES .................................................................................................................................................. 11 
Support of polymorphism and extension ...................................................................................................................... 17 
RESOURCE MODEL .................................................................................................................................................... 18 
Managed Entity and Task Resource Models ............................................................................................................ 18 
Bucket resource ..................................................................................................................................................... 18 
Topup Balance resource ....................................................................................................................................... 23 
Adjust Balance resource ........................................................................................................................................ 31 
Transfer Balance resource .................................................................................................................................... 38 
Reserve Balance resource .................................................................................................................................... 44 
Accumulated Balance resource ............................................................................................................................. 51 
Balance Action resource ........................................................................................................................................ 55 
Bucket Status Example Type resource ................................................................................................................. 61 
Notification Resource Models ................................................................................................................................... 62 
Bucket Create Event .............................................................................................................................................. 63 
Bucket Delete Event .............................................................................................................................................. 64 
Bucket Attribute Value Change Event ................................................................................................................... 64 
Topup Balance Create Event ................................................................................................................................ 64 
Topup Balance Cancel Event ................................................................................................................................ 65 
Topup Balance Failure Event ................................................................................................................................ 65 
Topup Balance Attribute Value Change Event ...................................................................................................... 65 
Topup Balance Status Change Event ................................................................................................................... 66 
Topup Balance Delete Event ................................................................................................................................. 66 
Adjust Balance Create Event ................................................................................................................................. 66 
Adjust Balance Cancel Event ................................................................................................................................ 67 
Adjust Balance Failure Event ................................................................................................................................ 67 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 5 of 135 
Adjust Balance Attribute Value Change Event ...................................................................................................... 67 
Adjust Balance Status Change Event .................................................................................................................... 68 
Adjust Balance Delete Event ................................................................................................................................. 68 
Transfer Balance Create Event ............................................................................................................................. 68 
Transfer Balance Cancel Event ............................................................................................................................. 69 
Transfer Balance Failure Event ............................................................................................................................. 69 
Transfer Balance Attribute Value Change Event ................................................................................................... 70 
Transfer Balance Status Change Event ................................................................................................................ 70 
Transfer Balance Delete Event .............................................................................................................................. 70 
Reserve Balance Create Event ............................................................................................................................. 71 
Reserve Balance Cancel Event ............................................................................................................................. 71 
Reserve Balance Failure Event ............................................................................................................................. 71 
Reserve Balance Attribute Value Change Event ................................................................................................... 72 
Reserve Balance Status Change Event ................................................................................................................ 72 
Reserve Balance Delete Event .............................................................................................................................. 72 
API OPERATIONS ........................................................................................................................................................ 74 
Operations on Bucket ............................................................................................................................................... 75 
List buckets ............................................................................................................................................................ 75 
Retrieve bucket ...................................................................................................................................................... 78 
Create bucket ........................................................................................................................................................ 80 
Delete bucket ......................................................................................................................................................... 82 
Operations on Topup Balance .................................................................................................................................. 82 
List topup balances ................................................................................................................................................ 82 
Retrieve topup balance .......................................................................................................................................... 85 
Create topup balance ............................................................................................................................................ 86 
Patch topup balance .............................................................................................................................................. 91 
Delete topup balance ............................................................................................................................................. 93 
Operations on Adjust Balance .................................................................................................................................. 94 
List adjust balances ............................................................................................................................................... 94 
Retrieve adjust balance ......................................................................................................................................... 97 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 6 of 135 
Create adjust balance ............................................................................................................................................ 98 
Patch adjust balance ........................................................................................................................................... 102 
Delete adjust balance .......................................................................................................................................... 104 
Operations on Transfer Balance ............................................................................................................................. 104 
List transfer balances........................................................................................................................................... 104 
Retrieve transfer balance .................................................................................................................................... 108 
Create transfer balance ....................................................................................................................................... 110 
Patch transfer balance ......................................................................................................................................... 114 
Delete transfer balance ....................................................................................................................................... 115 
Operations on Reserve Balance ............................................................................................................................. 116 
List reserve balances ........................................................................................................................................... 116 
Retrieve reserve balance ..................................................................................................................................... 117 
Create reserve balance ....................................................................................................................................... 119 
Patch reserve balance ......................................................................................................................................... 121 
Delete reserve balance ........................................................................................................................................ 122 
Operations on Accumulated Balance ..................................................................................................................... 123 
List accumulated balances .................................................................................................................................. 123 
Retrieve accumulated balance ............................................................................................................................ 124 
Operations on Balance Action ................................................................................................................................ 125 
List balance actions ............................................................................................................................................. 125 
Retrieve balance action ....................................................................................................................................... 128 
Operations on Bucket Status Example Type .......................................................................................................... 129 
API NOTIFICATIONS ................................................................................................................................................. 130 
Register listener ...................................................................................................................................................... 130 
Unregister listener ................................................................................................................................................... 132 
Publish Event to listener ......................................................................................................................................... 132 
Appendix ..................................................................................................................................................................... 134 
Acknowledgements ..................................................................................................................................................... 135 
Version History ........................................................................................................................................................ 135 
Release History ....................................................................................................................................................... 135 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 7 of 135 
List of Tables 
N/A 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 8 of 135 
Introduction 
The following document is the specification of the REST API for Prepay Balance Management. It includes the model 
definition as well as all available operations for the Prepay Balance Management API.  
Prepay users pay up front before using services. Therefore, the users must have sufficient balance to use these 
services. The purpose of this API is to manage and track these balances.  
A bucket represents an entity that keeps track of the balance available to use services. Every bucket will measure 
balance in different units, it can be monetary or non-monetary (for example a number of SMS that are available or 
the number of GB of data that are available). Users can pass credit between different balance buckets, therefore 
transferring balance from one bucket to another. Operators can provide multiple recharge channels to top up these 
buckets to increase the balance to use for services. 
When a customer acquires a product offered by a service provider, the fulfilment process creates a set of bucket 
entities to track the balance for the services that comprise the product. As a part of the instantiation of a mobile line 
product, the fulfilment process creates voice, data and SMS buckets that are associated to the product and 
provisioned to the Home Location Register. The process creates a prepaid account in the Prepay Billing System and 
an entry in the Customer Relationship Management databases. 
Each bucket has its own unique id assigned to it during the fulfilment process. This id uniquely identifies the bucket 
when topping up the balance on the bucket or any other of the actions that a consumer or agent performs on a 
bucket. Additionally, the consumer or agent can use a combination of the associated account and usage type to 
identify the bucket. Usage type can be either of type monetary or non-monetary. 
Each bucket can have an association with more than one product. This enables consumers to share services for 
example data bundles.  
The following is the list of resources that are associated with this API 
 
- Bucket: An entity that manages an amount of money or data associated with a product. The usage type of the 
Bucket indicates whether the Bucket is responsible for managing a monetary amount or a non-monetary amount. 
Typical values for usageType would be monetary or data or text or voice. 
 
- TopupBalance: A task that operates on a Bucket resource. The TopupBalance task charges or recharges a Bucket 
with an amount. The amount can be charged/recharged one time or recurringly. The TopupBalance resource is of 
@type TopupBalance and extends the Action resource. 
 
- AdjustBalance: A task that operates on Bucket resource. The AdjustBalance task  increments or decrements the 
amount on a Bucket. The AdjustBalance resource is of @type AdjustBalance and extends the Action resource. 
 
- TransferBalance: A task that operates on Bucket resource. The TransferBalance transfers amounts from a source 
Bucket to a target Bucket. The usage type of the source Bucket must match the usage type of the target Bucket. The 
TransferBalance resource is of @type TransferBalance and extends the Action resource. 
 
- ReserveBalance: A task that operates on Bucket resource. The ReserveBalance reserves an amount on a Bucket. 
The ReserveBalance resource is of @type ReserveBalance and extends the Action resource. 
 
- BalanceAction: A resource that allows a consumer to retrieve a history of the tasks listed above that act on a 
Bucket. The @type attribute specifies the type of the task.  
 
- AccumulatedBalance: A resource that allows a consumer to retrieve an aggregation of amounts for many 
Buckets.   
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 9 of 135 
 
The Prepay Balance API exposes the following operations on the following resources 
 
- Bucket:  
 
           /GET  /bucket/{id} 
           Retrieve a Bucket resource using its unique identifier 
            
           /GET /bucket 
           Retrieve a list of Bucket resources. 
 
- TopupBalance:  
 
           /POST  /topupBalance 
           charges or recharges a Bucket with an amount.  
            
           /PATCH /topupBalance 
           cancels a topup operation. 
            
           /GET /topupBalance/{id} 
           retrieves a TopupBalance resource using its unique identifier 
 
           /GET /topupBalance 
           retrieves a list of TopupBalance resources 
 
           /DELETE /topupBalance/{id} 
           deletes a TopupBalance resource 
 
 
- AdjustBalance:  
 
           /POST  /adjustBalance 
           increments or decrements  a Bucket with an amount.  
            
           /PATCH /adjustBalance 
           cancels an adjustBalance operation. 
            
           /GET /adjustBalance/{id} 
           retrieves an adjustBalance resource using its unique identifier 
 
           /GET /adjustBalance 
           retrieves a list of adjustBalance resources 
 
           /DELETE /adjustBalance/{id} 
           deletes an adjustBalance resource 
 
- TransferBalance:  
 
           /POST  /transferBalance 
           transfers an amount from a source Bucket to a target Bucket. The usageType of each Bucket must match.  
            
           /PATCH /transferBalance 
           cancels a transferBalance operation. 
            
           /GET /transferBalance/{id} 
           retrieves a transferBalance resource using its unique identifier 
 
           /GET /transferBalance 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 10 of 135 
           retrieves a list of transferBalance resources 
 
           /DELETE /transfertBalance/{id} 
           deletes a transferBalance resource 
 
 
- ReserveBalance:  
 
           /POST  /reserveBalance 
           reserves an amount on a Bucket. 
            
           /PATCH /reserveBalance 
           cancels a reserved amount on a Bucket. 
            
           /GET /reserveBalance/{id} 
           retrieves a reserveBalance resource using its unique identifier 
 
           /GET /reserveBalance 
           retrieves a list of reserveBalance resources 
 
           /DELETE /reservetBalance/{id} 
           deletes a reserveBalance resource 
 
 
- BalanceAction:  
 
           /GET  /balanceActionHistory 
           Retrieves a list of BalanceActions. BalanceActions are the following tasks:  
 
           TopupBalance,AdjustBalance,TransferBalance and ReserveBalance 
 
- AccumulatedBalance:  
 
           /GET  /accumulatedBalance 
           Retrieve a list of aggregated Bucket resources. 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 11 of 135 
SAMPLE USE CASES  
This section includes a set of main use cases that can be performed with this API. Additional use cases can be 
generated using the operations and resources defined in this specification.  
Use Case 1:  
The Customer tops up a Bucket associated with his/her account with an amount referencing the party account and 
usage type. The topup is one time only. 
Main Actors: 
 
The customer requesting the top up 
 
The requestor performing the top up 
 
The bucket. Identified by the party account and usage type 
Operation used: 
POST /topupBalance 
Pre-Conditions: 
The amount attribute is mandatory in the request. At least one of the following attributes MUST be included in the 
request. 
• 
logicalResourceRef 
• 
productRef 
• 
bucketRef 
• 
relatedParty 
The requestor is authorised to access this API. 
The Bucket exists and is associated with a valid Product 
The usage type is a valid type. For an overview of the different usage types refer to the Appendix. 
Use Case Steps: 
The consumer sends the following in the request: 
• 
A reference to the channel being used 
• 
A reference to the payment method to be used e.g. credit card.  
• 
A reference to the customer’s party account.  
• 
A reference to the requestor or this information is extracted from a bearer token which allows the requestor 
permissions to perform this operation 
• 
A valid usage type. This must be consistent with the type of the units defined in the Amount. Refer to the first 
entry in the appendix for examples. 
• 
The isAutoTopup flag is set to false indicating this is a one-time top up. 
• 
The operator confirms that the requestor is authorised to perform the recharge action over the specific 
affected subscriber. The operator may validate the requestor identifier or use a token-based authorization 
mechanism such as OAuth2 or OIDC. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 12 of 135 
• 
The top-up operation is processed, and the non-monetary buckets associated with the Product are 
incremented in accordance with the pricing plan associated with the Product. The new amounts will be valid 
for the time defined by a default value defined by the system.  
• 
The system returns with a 201 successful response indicating the operation has executed successfully 
 
Expected outcome: 
 
• 
The non-monetary buckets associated with the product will be incremented by amounts determined by the 
pricing plan associated with the Product. 
• 
The customer can consume services until the balances on the Buckets are exhausted. 
 
       
Use Case 2: 
The customer tops up a Bucket associated with his/her account with an amount referencing the unique id of the 
Bucket. The isAutoTopup flag is true and the top up is recurring.  
Main Actors: 
 
The customer requesting the top up 
            The requestor performing the top up 
 
The bucket. Identified by its unique id 
Operation used: 
POST /topupBalance 
Pre-Conditions: 
The amount attribute is mandatory in the request. At least one of the following attributes MUST be included in the 
request. 
• 
logicalResourceRef 
• 
productRef 
• 
bucketRef 
• 
relatedParty 
The requestor is authorised to access this API. 
The bucket exists and is associated with a valid product 
The requestor has looked up a valid Bucket id using the GET /bucket operation exposed on this API 
Use Case Steps: 
The requestor sends the following in the request: 
• 
A reference to the channel being used 
• 
A reference to the requestor or this information is extracted from a bearer token which allows the requestor 
permissions to perform this operation. 
• 
A valid bucket identifier.  
• 
The isAutoTopup flag is set to true, the numberOfPeriods is set to 3 and the recurringPeriod is set to 
monthly. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 13 of 135 
• 
The operator confirms that the requestor is authorised to perform the recharge action over the specific 
affected subscriber. The operator may validate the requestor identifier or use a token-based authorization 
mechanism such as OAuth2 or OIDC. 
• 
The top-up operation is processed, and the non-monetary buckets associated with the Product are 
incremented in accordance with the pricing plan associated with the Product. The new amounts will be valid 
for the time defined by a default value defined by the system.  
• 
The system returns with a 201 successful response indicating the operation has executed successfully 
 
Expected outcome: 
 
• 
The non-monetary buckets associated with the product will be incremented by amounts determined by the 
pricing plan associated with the Product. 
• 
The customer can consume services until the balances on the buckets are exhausted. 
 
 
Use Case 3: 
An Agent cancels a top up request on behalf of a customer and the customer has a current recurring top up. 
Main Actors: 
 
The agent cancelling the top up 
 
The bucket. Identified by the bucket id 
Operation used: 
PATCH /topupBalance 
Pre-Conditions: 
At least one of the following attributes MUST be included in the request. 
• 
logicalResourceRef 
• 
productRef 
• 
bucketRef 
• 
relatedParty 
The agent is authorised to access this API. 
The Bucket exists and is associated with a valid Product 
Use Case Steps: 
The Agent sends the following in the request: 
• 
A reference to the channel being used 
• 
A reference to the bucket 
• 
A reference to the requestor(agent) or this information is extracted from a bearer token which allows the 
requestor permissions to perform this operation 
• 
The status set to “cancelled” 
• 
A reason stating why the top up is to be cancelled. 
• 
The requested Date which corresponds to the time stamp when the Agent performs the cancellation. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 14 of 135 
• 
The operator confirms that the requestor is authorised to perform the recharge action over the specific 
affected subscriber. The operator may validate the requestor identifier or use a token-based authorization 
mechanism such as OAuth2 or OIDC. 
• 
The cancel top-up operation is processed. The autoTopup flag on the top up stored by the server is set to 
false. The top up will then expire and the customer will not be charged further. 
• 
The system returns with a 200 successful response indicating the operation has executed successfully. 
 
 
Expected outcome: 
  
• 
The customer is no longer charged and will no longer be able to consume the services offered by the 
Product 
• 
The Product is cancelled for the customer. The Prepay Balance account is deleted, and the CRM is updated 
accordingly. The services on the HLR are de-provisioned.  
• 
The customer can continue to use the services which are a part of the Product until the Bucket expires and 
there are still balances remaining on the Buckets. 
 
 
Use Case 4:  
The customer transfers a monetary amount from a bucket to a colleague 
Main Actors: 
 
The customer requesting the transfer 
             The requestor performing the transfer 
 
The bucket of the customer identified by the bucket id 
            The target bucket of the colleague identified by the target bucket id 
Source and target buckets exist and are associated with a valid product 
The usage type of both buckets is the same. If they do not match an error will be returned. For a description 
of the valid usage types refer to the appendix 
Operation used: 
POST /transferBalance 
Pre-Conditions: 
The amount attribute is mandatory in the request. At least one of the following attributes MUST be included in the 
request. 
• 
logicalResourceRef 
• 
productRef 
• 
bucketRef 
• 
relatedParty 
At least one of the following attributes MUST be included in the request from the following list 
• 
receiverLogicalResourceRef 
• 
receiverProductRef 
• 
receiverBucketRef 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 15 of 135 
 
The requestor is authorised to access this API. 
The bucket exists and is associated with a valid product. 
Use Case Steps: 
The customer sends the following in the request: 
• 
A reference to the channel being used 
• 
A reference to the source bucket id 
• 
A reference to the target bucket id 
• 
The costOwner attribute is set to ‘originator’ indicating the owner of the source bucket will pay the transfer 
costs 
• 
The transferCost indicates the amount to be charged for the transfer 
• 
The operator confirms that the requestor is authorised to perform the action over the specific affected 
subscriber. The operator may validate the requestor identifier or use a token-based authorization mechanism 
such as OAuth2 or OIDC. 
• 
The transfer balance operation is processed, and the monetary amount associated with the source bucket is 
transferred to the target bucket. 
• 
The system returns with a 201 successful response indicating the operation has executed successfully 
 
Expected outcome: 
 
• 
The source bucket id is deducted with the amount sent in the request  
• 
The owner’s prepaid account is deducted the amount of the transferCost 
• 
The target bucket is incremented with the amount sent in the request 
• 
The new amount will be valid for the time defined by the system  
 
Use Case 5: 
The customer wishes to reserve an amount on a bucket   
Main Actors: 
 
The customer requesting the reservation 
            The requestor performing the reservation 
 
The bucket. Identified by its unique id 
Operation used: 
POST /reserveBalance 
Pre-Conditions: 
The amount attribute is mandatory in the request. At least one of the following attributes MUST be included in the 
request. 
• 
logicalResourceRef 
• 
productRef 
• 
bucketRef 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 16 of 135 
• 
relatedParty 
The requestor is authorised to access this API. 
The Bucket exists and is associated with a valid Product 
The requestor has looked up a valid Bucket id using the GET /Bucket operation exposed on this API 
Use Case Steps: 
The requestor sends the following in the request: 
• 
A reference to the channel being used 
• 
An amount indicating how much should be reserved on the bucket. The units defined in the amount must 
match the usage type of the bucket. Valid usage types are defined in the appendix. 
• 
A reference to the requestor or this information is extracted from a bearer token which allows the requestor 
permissions to perform this operation. 
• 
A valid bucket identifier. 
• 
A reason indicating why the amount is being reserved. 
• 
The operator confirms that the requestor is authorised to perform the recharge action over the specific 
affected subscriber. The operator may validate the requestor identifier or use a token-based authorization 
mechanism such as OAuth2 or OIDC. 
• 
The reserve operation is processed and the reservedAmount on the bucket is incremented with the amount 
sent in the request. The amount sent in the request is deducted from the amount for the bucket. 
• 
The system returns with a 201 successful response indicating the operation has executed successfully  
 
Expected outcome: 
 
• 
The amount on the bucket is reduced by the amount sent in the request 
• 
The reservedAmount on the bucket is set to the amount in the request 
• 
The customer cannot use the reserved amount to access any of the services associated with the product. 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 17 of 135 
Support of polymorphism and extension  
Support of polymorphic collections and types and schema based extension is provided by means of a list of generic 
meta-attributes that we describe below. Polymorphism in collections occurs when entities inherit from base entities, 
for instance a TypeAServiceOrder or TypeBServiceOrder inheriting properties from the base ServiceOrder entity. 
Generic support of polymorphism and pattern extensions is described in the TMF API Guidelines v3.0 Part 2 
document. 
The @type attribute provides a way to represent the actual class type of an entity. For example, within a list of 
ServiceOrder instances some may be instances of TypeAServiceOrder where other could be instances of 
TypeBServiceOrder . The @type gives this information. All resources and sub-resources of this API have a @type 
attributes that can be provided when this is useful. 
The @referredType can be used within reference entities (like for instance a RelatedParty object) to explicitly denote 
the actual entity type of the referred class. Notice that in reference entities the @type, when used, denotes the class 
type of the reference itself, such as RelatedParty, and not the class type of the referred object. However, since 
reference classes are rarely sub-classed, @type is generally not useful in reference objects. 
The @schemaLocation property can be used in resources to allow specifying user-defined properties of an Entity or 
to specify the expected characteristics of an entity. 
The @baseType attribute gives a way to provide explicitly the base of class of a given resource that has been 
extended 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 18 of 135 
RESOURCE MODEL 
Managed Entity and Task Resource Models 
Bucket resource 
A bucket (called UsageVolumProduct in the SID Model) represents and tracks a quantity of usage (remaining or 
consumed). It could be either a quantity or an amount in a currency. It can represent a fixed number of SMS,MMS, 
call minutes, quantity of data and so on. 
Resource model 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 19 of 135 
 
Field descriptions 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 20 of 135 
Bucket fields 
href 
A string. A resource URI pointing to the resource in the OB that stores the detailed 
information for the bucket. 
id 
A string. Unique Identifier within the server for the bucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
description 
A string. Text describing the contents of the balance managed by the bucket. 
href 
A string. A resource URI pointing to the resource in the OB that stores the detailed 
information for the bucket. 
id 
A string. Unique Identifier within the server for the bucket. 
isShared 
A boolean. True if the bucket is shared between several devices or users. 
logicalResource 
A list of logical resource references (LogicalResourceRef [*]). reference to the 
LogicalResource e.g. MSISDN. 
name 
A string. Friendly name to identify the bucket. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the 
bucket. 
product 
A list of product references (ProductRef [*]). 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other 
entity with relation to the balance, for instance to define customer hierarchy for the 
balance (e.g.: customerId, userId, ). 
remainingValue 
A quantity (Quantity). Indicate the amount on the bucket. 
remainingValueName 
A string. Remaining amount in a formatted string for the bucket given in the balance 
unit (for example 1.9 Gb). This formatted string could be used for display needs for 
example. 
reservedValue 
A quantity (Quantity). Indicate the amount reserved on the bucket. 
status 
A string. status for the bucket. active, expired, suspended. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
validFor 
A time period. The period for which the balance in the bucket is valid. 
Quantity sub-resource 
An amount in a given unit. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 21 of 135 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 22 of 135 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
Json representation sample 
We provide below the json representation of an example of a 'Bucket' resource object 
{ 
    "id": "11", 
    "href": "prepayBalanceManagement/v4/bucket/11", 
    "description": "this bucket holds the amount available on the bucket to the consumer. It's type is defined by the 
usageType and can be monetary or non-monetary", 
    "name": "bucket for prd1", 
    "@type": "Bucket", 
    "remainingValue": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "remainingValueName": "bucket for prd1", 
    "isShared": false, 
    "usageType": "monetary", 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 23 of 135 
    }, 
    "logicalResource": { 
        "id": "4", 
        "href": "/resouceInventoryManagement/logicalResource/4" 
    }, 
    "relatedParty": [ 
        { 
            "id": "cust1", 
            "href": "/partyManagement/customer/cust1", 
            "name": "jerry watts", 
            "role": "customer" 
        } 
    ], 
    "status": "active", 
    "reservedValue": 0, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "2020-01-12T23:20:50.52Z", 
        "startDateTime": "2020-03-12T23:20:50.52Z" 
    } 
} 
Topup Balance resource 
Represents a detailed description of a recharge operation requested over a bucket (defined by a specific product or 
reference to a product (i.e.: a commercial id such as an msisidn) and a service type). 
Resource model 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 24 of 135 
 
Field descriptions 
TopupBalance fields 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Description of the recharge operation. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
reason 
A string. Text describing the reason for the action/task. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
status 
A string. Status of the operation. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 25 of 135 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
isAutoTopup 
A boolean. Indicates if the topup requested is an autotopup (to be processed 
periodically). 
numberOfPeriods 
An integer. For autotopup indicates the number of occurrences of the period the 
recharge operation must be executed. If not included, then no limit is set to stop the 
execution of the topup every period. 
payment 
A payment reference (PaymentRef). If an immediate payment has been done at the 
product order submission, the payment information is captured and stored (as a 
reference) in the order. 
paymentMethod 
A payment method reference (PaymentMethodRef). Payment method used for the 
recharge operation (e.g.: cash, credit card). Structure including at least attribute 
dname. Notice that the use of a voucher can be managed as a specific methodtype, 
where he voucher code can be passed as value. 
recurringPeriod 
A string. For autotopup indicates the periodicity for the recharge operation (monthly, 
weekly, ). 
relatedTopupBalance 
A related topup balance (RelatedTopupBalance). Related Entity reference. A related 
balance topup defines a relationship via a role to another balance topup. Used in the 
PrepayBalanceManagement API to track child topups that are related to the parent 
(initiating balance topup resource). PrepayBalanceManagement defines the child role. 
voucher 
A string. Identifier for a voucher when the topup can be performed by this means. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. This is always a positive 
value. If part of an AdjustBalance then the adjustType will indicate if the amount is to 
be credited or debited. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
channel 
A channel reference (ChannelRef). Indicator for the channel used to request the 
transfer operation. Structure including at least attribute name. 
impactedBucket 
A list of impacted buckets (ImpactedBucket [*]). A reference to the bucket impacted by 
the request or the value itself. 
logicalResource 
A logical resource reference (LogicalResourceRef). A reference to the logical resource 
that can be used to identify the bucket balance for example where product ids are not 
unique. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the 
bucket impacted by the balance related operation. 
product 
A product reference (ProductRef). A reference to the Product associated with this 
bucket. 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 26 of 135 
entity with relation to the operation. 
requestor 
A related party (RelatedParty). Identifier for the user/customer/entity that performs the 
top-up action. This can be used to indicate the identifier of an agent that performs the 
operation on behalf of a user via a customer service channel. Structure including at 
least attributes role and name. 
ImpactedBucket sub-resource 
A resource that references other buckets that have been impacted by the action of type 
TopupBalance,AdjustBalance,TransferBalance or ReserveBalance. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amountAfter 
A quantity (Quantity). Indicates the amount after on the impacted bucket after the 
action has completed. 
amountBefore 
A quantity (Quantity). Indicates the amount remaining on the impacted bucket. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Text describing the contents of the balance managed by the bucket. 
item 
A list of impacted bucket items (ImpactedBucketItem [1..*]). a resource used by the 
ImpactedBucket resource to capture the impact of an ImpactedBucket. 
name 
A string. Friendly name to identify the bucket. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
ImpactedBucketItem sub-resource 
a resource used by the ImpactedBucket resource to capture the impact of an ImpactedBucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. 
description 
A string. Description of the recharge operation. 
itemType 
A string. This indicates whether the action led to the bucket being incremented or 
decremented.e.g. credit or debit. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 27 of 135 
name 
A string. This represents the transaction activity. e.g. topup, bonus, additional bonus, 
tax, fees, and so on. 
reason 
A string. Text describing the reason for the action/task. 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
RelatedTopupBalance sub-resource 
Related Entity reference. A related balance topup defines a relationship via a role to another balance topup. Used in 
the PrepayBalanceManagement API to track child topups that are related to the parent (initiating balance topup 
resource). PrepayBalanceManagement defines the child role. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the TopupBalance. In the PrepayBalanceManagement API 
this is parent or child. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 28 of 135 
BucketRef relationship 
link to the resource that holds bucket information. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
ChannelRef relationship 
The channel to which the resource reference to. e.g. channel for selling product offerings, channel for opening a 
trouble ticket etc. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the channel. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 29 of 135 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
PaymentMethodRef relationship 
PaymentMethod reference. A payment method defines a specific mean of payment (e.g. direct debit). 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
PaymentRef relationship 
If an immediate payment has been done at the product order submission, the payment information are captured and 
stored (as a reference) in the order. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. A name for the payment. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 30 of 135 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalance' resource object 
{ 
    "id": "55", 
    "href": "/prepayBalanceManagement/v4/topupBalance/4", 
    "description": "A topup of 50 Euros using a voucher", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "isAutopTopup": true, 
    "numberOfPeriods": 2, 
    "recurringPeriod": "monthly", 
    "usageType": "monetary", 
    "reason": "enabling a recurring topup with a voucher payment", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "partyAccount": { 
        "id": "acc1", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 31 of 135 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "voucher": "XS23DXADS", 
    "status": "confirmed", 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-04-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
Adjust Balance resource 
The AdjustBalance resource allows adjustments to be made to the original BalanceTopup e.g. increment the 
amount, alter the recharge periodicity. 
Resource model 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 32 of 135 
 
Field descriptions 
AdjustBalance fields 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Description of the recharge operation. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
reason 
A string. Text describing the reason for the action/task. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
status 
A string. Status of the operation. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. EUR, 
USD etc. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 33 of 135 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
adjustType 
A string. The type of the adjustment. For example: 
recurringChargeDebit,oneTimeChargeCredit,oneTimeChargeDebit,goodWillCredit,generalDebit. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. This is always a positive value. If part 
of an AdjustBalance then the adjustType will indicate if the amount is to be credited or debited. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or the value 
itself. 
channel 
A channel reference (ChannelRef). Indicator for the channel used to request the transfer 
operation. Structure including at least attribute name. 
impactedBucket 
A list of impacted buckets (ImpactedBucket [*]). A reference to the bucket impacted by the 
request or the value itself. 
logicalResource 
A logical resource reference (LogicalResourceRef). A reference to the logical resource that can 
be used to identify the bucket balance for example where product ids are not unique. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the bucket 
impacted by the balance related operation. 
product 
A product reference (ProductRef). A reference to the Product associated with this bucket. 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other entity 
with relation to the operation. 
requestor 
A related party (RelatedParty). Identifier for the user/customer/entity that performs the top-up 
action. This can be used to indicate the identifier of an agent that performs the operation on 
behalf of a user via a customer service channel. Structure including at least attributes role and 
name. 
ImpactedBucket sub-resource 
A resource that references other buckets that have been impacted by the action of type 
TopupBalance,AdjustBalance,TransferBalance or ReserveBalance. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amountAfter 
A quantity (Quantity). Indicates the amount after on the impacted bucket after the 
action has completed. 
amountBefore 
A quantity (Quantity). Indicates the amount remaining on the impacted bucket. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 34 of 135 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Text describing the contents of the balance managed by the bucket. 
item 
A list of impacted bucket items (ImpactedBucketItem [1..*]). a resource used by the 
ImpactedBucket resource to capture the impact of an ImpactedBucket. 
name 
A string. Friendly name to identify the bucket. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
ImpactedBucketItem sub-resource 
a resource used by the ImpactedBucket resource to capture the impact of an ImpactedBucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. 
description 
A string. Description of the recharge operation. 
itemType 
A string. This indicates whether the action led to the bucket being incremented or 
decremented.eg credit or debit. 
name 
A string. This represents the transaction activity. e.g. topup, bonus, additional bonus, 
tax, fees, and so on. 
reason 
A string. Text describing the reason for the action/task. 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 35 of 135 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
BucketRef relationship 
link to the resource that holds bucket information. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
ChannelRef relationship 
The channel to which the resource reference to. e.g. channel for selling product offerings, channel for opening a 
trouble ticket etc. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the channel. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 36 of 135 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
Json representation sample 
We provide below the json representation of an example of an 'AdjustBalance' resource object 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 37 of 135 
{ 
    "id": "55", 
    "href": "/prepayBalanceManagement/v4/topupBalance/4", 
    "description": "A topup of 50 Euros using a voucher", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "adjustType": "oneTime", 
    "reason": "enabling a recurring topup with a voucher payment", 
    "usageType": "monetary", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "voucher": "XS23DXADS", 
    "status": "confirmed", 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-04-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 38 of 135 
Transfer Balance resource 
The TransferBalance resource is a detailed description of credit transfer operation requested between two buckets 
(reference to products owned by customers and consuming credit when using a service). 
Resource model 
 
Field descriptions 
TransferBalance fields 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Description of the recharge operation. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
reason 
A string. Text describing the reason for the action/task. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
status 
A string. Status of the operation. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 39 of 135 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
costOwner 
A string. Indicates which related party will bear the costs of the transfer. e.g. originator 
or receiver. 
receiver 
A related party (RelatedParty). Identifier for the user/customer/entity that receives the 
transfer when it is required to indicate additional customer hierarchy information 
regarding the entity receiving the balance transfer Structure including at least attributes 
“role” and “name”. 
receiverBucket 
A bucket reference (BucketRef). A reference to the bucket to which the balance will be 
transferred. 
receiverBucketUsageType 
A string. Type of prepay balance bucket (e.g.: roaming-data, data, roaming-voice etc.). 
receiverLogicalResource 
A logical resource reference (LogicalResourceRef). A reference to the logical resource 
that can be used to identify the bucket balance for example where product ids are not 
unique. 
receiverPartyAccount 
A party account reference (PartyAccountRef). A reference to the receiver account that 
owns the receiverlbucket impacted by the balance related operation. 
receiverProduct 
A product reference (ProductRef). 
requestor 
A related party (RelatedParty). Identifier for the user/customer/entity that performs the 
top-up action. This can be used to indicate the identifier of an agent that performs the 
operation on behalf of a user via a customer service channel. Structure including at 
least attributes role and name. 
transferCost 
A quantity (Quantity). Associated cost to be charged for the transfer operation (can be 
monetary or non-monetary). 
amount 
A quantity (Quantity). Indicate the amount on the bucket. This is always a positive 
value. If part of an AdjustBalance then the adjustType will indicate if the amount is to 
be credited or debited. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
channel 
A channel reference (ChannelRef). Indicator for the channel used to request the 
transfer operation. Structure including at least attribute name. 
impactedBucket 
A list of impacted buckets (ImpactedBucket [*]). A reference to the bucket impacted by 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 40 of 135 
the request or the value itself. 
logicalResource 
A logical resource reference (LogicalResourceRef). A reference to the logical resource 
that can be used to identify the bucket balance for example where product ids are not 
unique. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the 
bucket impacted by the balance related operation. 
product 
A product reference (ProductRef). A reference to the Product associated with this 
bucket. 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other 
entity with relation to the operation. 
requestor 
A related party (RelatedParty). Identifier for the user/customer/entity that performs the 
top-up action. This can be used to indicate the identifier of an agent that performs the 
operation on behalf of a user via a customer service channel. Structure including at 
least attributes role and name. 
ImpactedBucket sub-resource 
A resource that references other buckets that have been impacted by the action of type 
TopupBalance,AdjustBalance,TransferBalance or ReserveBalance. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amountAfter 
A quantity (Quantity). Indicates the amount after on the impacted bucket after the 
action has completed. 
amountBefore 
A quantity (Quantity). Indicates the amount remaining on the impacted bucket. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Text describing the contents of the balance managed by the bucket. 
item 
A list of impacted bucket items (ImpactedBucketItem [1..*]). a resource used by the 
ImpactedBucket resource to capture the impact of an ImpactedBucket. 
name 
A string. Friendly name to identify the bucket. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
ImpactedBucketItem sub-resource 
a resource used by the ImpactedBucket resource to capture the impact of an ImpactedBucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 41 of 135 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. 
description 
A string. Description of the recharge operation. 
itemType 
A string. This indicates whether the action led to the bucket being incremented or 
decremented.eg credit or debit. 
name 
A string. This represents the transaction activity. e.g. topup, bonus, additional bonus, 
tax, fees, and so on. 
reason 
A string. Text describing the reason for the action/task. 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
BucketRef relationship 
link to the resource that holds bucket information. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 42 of 135 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
ChannelRef relationship 
The channel to which the resource reference to. e.g. channel for selling product offerings, channel for opening a 
trouble ticket etc. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the channel. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 43 of 135 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalance' resource object 
{ 
    "id": "55", 
    "href": "/prepayBalanceManagement/v4/topupBalance/4", 
    "description": "transfer 50 Euros from the bucket identified by id 11 to the bucket identified by id 22. The source bucket 
owner pays the transfer costs of 1.5 Euro", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "reason": "enabling a recurring topup with a voucher payment", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 44 of 135 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "costOwner": "originator", 
    "transferCost": { 
        "unit": "Euro", 
        "value": 1.5 
    }, 
    "usageType": "monetary", 
    "receiverBucketUsageType": "monetary", 
    "receiverBucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/22" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "status": "confirmed", 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-04-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
Reserve Balance resource 
The ReserveBalance resource allows adjustments to be made to the original BalanceTopup e.g., increment the 
amount, alter the recharge periodicity. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 45 of 135 
Resource model 
 
Field descriptions 
ReserveBalance fields 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Description of the recharge operation. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
reason 
A string. Text describing the reason for the action/task. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
status 
A string. Status of the operation. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 46 of 135 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. This is always a positive 
value. If part of an AdjustBalance then the adjustType will indicate if the amount is to 
be credited or debited. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
channel 
A channel reference (ChannelRef). Indicator for the channel used to request the 
transfer operation. Structure including at least attribute name. 
impactedBucket 
A list of impacted buckets (ImpactedBucket [*]). A reference to the bucket impacted by 
the request or the value itself. 
logicalResource 
A logical resource reference (LogicalResourceRef). A reference to the logical resource 
that can be used to identify the bucket balance for example where product ids are not 
unique. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the 
bucket impacted by the balance related operation. 
product 
A product reference (ProductRef). A reference to the Product associated with this 
bucket. 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other 
entity with relation to the operation. 
requestor 
A related party (RelatedParty). Identifier for the user/customer/entity that performs the 
top-up action. This can be used to indicate the identifier of an agent that performs the 
operation on behalf of a user via a customer service channel. Structure including at 
least attributes role and name. 
ImpactedBucket sub-resource 
A resource that references other buckets that have been impacted by the action of type 
TopupBalance,AdjustBalance,TransferBalance or ReserveBalance. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amountAfter 
A quantity (Quantity). Indicates the amount after on the impacted bucket after the 
action has completed. 
amountBefore 
A quantity (Quantity). Indicates the amount remaining on the impacted bucket. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 47 of 135 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Text describing the contents of the balance managed by the bucket. 
item 
A list of impacted bucket items (ImpactedBucketItem [1..*]). a resource used by the 
ImpactedBucket resource to capture the impact of an ImpactedBucket. 
name 
A string. Friendly name to identify the bucket. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
ImpactedBucketItem sub-resource 
a resource used by the ImpactedBucket resource to capture the impact of an ImpactedBucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. 
description 
A string. Description of the recharge operation. 
itemType 
A string. This indicates whether the action led to the bucket being incremented or 
decremented.eg credit or debit. 
name 
A string. This represents the transaction activity. e.g. topup, bonus, additional bonus, 
tax, fees, and so on. 
reason 
A string. Text describing the reason for the action/task. 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 48 of 135 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
BucketRef relationship 
link to the resource that holds bucket information. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
ChannelRef relationship 
The channel to which the resource reference to. e.g. channel for selling product offerings, channel for opening a 
trouble ticket etc. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the channel. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 49 of 135 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 50 of 135 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalance' resource object 
 
{ 
    "id": "55", 
    "href": "/prepayBalanceManagement/v4/topupBalance/4", 
    "description": "A reservation of 10 Euros on the bucket identified by id 11", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "reason": "reserve 10 Euros in a bucket", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "usageType": "monetary", 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "status": "confirmed", 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-04-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 51 of 135 
    } 
} 
Accumulated Balance resource 
Represents and tracks the aggregated amount remained or owed in certain account which is owned by certain 
customer for a set of buckets. 
Resource model 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 52 of 135 
Field descriptions 
AccumulatedBalance fields 
href 
A string. A resource URI pointing to the resource in the OB that stores the detailed 
information. 
id 
A string. Unique Identifier within the server for the recharge operation request. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
bucket 
A list of bucket references (BucketRef [*]). A reference to the buckets involved in the 
aggregation. 
description 
A string. Text describing the contents of the aggregated balance. 
href 
A string. A resource URI pointing to the resource in the OB that stores the detailed 
information. 
id 
A string. Unique Identifier within the server for the recharge operation request. 
logicalResource 
A list of logical resource references (LogicalResourceRef [*]). reference to the 
LogicalResource e.g. MSISDN. 
name 
A string. Friendly name to identify the aggregated balance. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the 
buckets aggregated. 
product 
A list of product references (ProductRef [*]). A reference to the product whose 
consumption is managed by the bucket . This is an array to allow scenarios where 
buckets are shared between different products. 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other 
entity with relation to the balance, for instance to define customer hierarchy for the 
balance (e.g.: customerId, userId, ). 
totalBalance 
A quantity (Quantity). Aggregated for a set of prepay balance buckets associated to the 
product. 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 53 of 135 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
BucketRef relationship 
link to the resource that holds bucket information. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 54 of 135 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
Json representation sample 
We provide below the json representation of an example of an 'AccumulatedBalance' resource object 
{ 
    "bucket": [ 
        { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        } 
    ], 
    "description": "an accumulation of balances", 
    "href": "/prepayBalanceManagmenet/v4/accumulatedBalance/6956", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 55 of 135 
    "id": "6956", 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "name": "accumulatedBalance", 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "product": [ 
        { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        } 
    ], 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "totalBalance": { 
        "amount": 900, 
        "units": "MB" 
    } 
} 
Balance Action resource 
an abstract resource. example extensions are TopupBalance, AdjustBalance. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 56 of 135 
Resource model 
 
Field descriptions 
BalanceAction fields 
href 
A string. A reference to the resource. 
id 
A string. Unique Identifier for the resource. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. This is always a positive 
value. If part of an AdjustBalance then the adjustType will indicate if the amount is to 
be credited or debited. 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
channel 
A channel reference (ChannelRef). Indicator for the channel used to request the 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 57 of 135 
transfer operation. Structure including at least attribute name. 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Description of the recharge operation. 
href 
A string. A reference to the resource. 
id 
A string. Unique Identifier for the resource. 
impactedBucket 
A list of impacted buckets (ImpactedBucket [*]). A reference to the bucket impacted by 
the request or the value itself. 
logicalResource 
A logical resource reference (LogicalResourceRef). A reference to the logical resource 
that can be used to identify the bucket balance for example where product ids are not 
unique. 
partyAccount 
A party account reference (PartyAccountRef). A reference to the account that owns the 
bucket impacted by the balance related operation. 
product 
A product reference (ProductRef). A reference to the Product associated with this 
bucket. 
reason 
A string. Text describing the reason for the action/task. 
relatedParty 
A list of related parties (RelatedParty [*]). Used to provide information about any other 
entity with relation to the operation. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
requestor 
A related party (RelatedParty). Identifier for the user/customer/entity that performs the 
top-up action. This can be used to indicate the identifier of an agent that performs the 
operation on behalf of a user via a customer service channel. Structure including at 
least attributes role and name. 
status 
A string. Status of the operation. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
ImpactedBucket sub-resource 
A resource that references other buckets that have been impacted by the action of type 
TopupBalance,AdjustBalance,TransferBalance or ReserveBalance. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amountAfter 
A quantity (Quantity). Indicates the amount after on the impacted bucket after the 
action has completed. 
amountBefore 
A quantity (Quantity). Indicates the amount remaining on the impacted bucket. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 58 of 135 
bucket 
A bucket reference (BucketRef). A reference to the bucket impacted by the request or 
the value itself. 
confirmationDate 
A date time (DateTime). Date when the deduction was confirmed in the server. 
description 
A string. Text describing the contents of the balance managed by the bucket. 
item 
A list of impacted bucket items (ImpactedBucketItem [1..*]). a resource used by the 
ImpactedBucket resource to capture the impact of an ImpactedBucket. 
name 
A string. Friendly name to identify the bucket. 
requestedDate 
A date time (DateTime). Date when the deduction request was received in the server. 
ImpactedBucketItem sub-resource 
a resource used by the ImpactedBucket resource to capture the impact of an ImpactedBucket. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
amount 
A quantity (Quantity). Indicate the amount on the bucket. 
description 
A string. Description of the recharge operation. 
itemType 
A string. This indicates whether the action led to the bucket being incremented or 
decremented.eg credit or debit. 
name 
A string. This represents the transaction activity. e.g. topup, bonus, additional bonus, 
tax, fees, and so on. 
reason 
A string. Text describing the reason for the action/task. 
Quantity sub-resource 
An amount in a given unit. 
amount 
A float. Numeric value in a given unit. 
units 
A string. Unit. 
RelatedParty sub-resource 
Related Entity reference. A related party defines party or party role linked to a specific entity. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 59 of 135 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
role 
A string. Role played by the related party. 
BucketRef relationship 
link to the resource that holds bucket information. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
usageType 
A string. defines the type of the underlying Balance e.g. data,voice, any currency e.g. 
EUR, USD etc. 
ChannelRef relationship 
The channel to which the resource reference to. e.g. channel for selling product offerings, channel for opening a 
trouble ticket etc. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the channel. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
LogicalResourceRef relationship 
reference to the LogicalResource e.g. MSISDN. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 60 of 135 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
value 
A string. The value of the logical resource. 
PartyAccountRef relationship 
PartyAccount reference. A party account is an arrangement that a party has with an enterprise that provides 
products to the party. 
href 
A string. Reference of the party account. 
id 
A string. Unique identifier of the party account. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
description 
A string. Detailed description of the party account. 
name 
A string. Name of the party account. 
status 
A string. The condition of the account, such as due, paid, in arrears. 
ProductRef relationship 
 
@referredType 
A string. The actual type of the target instance when needed for disambiguation. 
name 
A string. Name of the related entity. 
href 
An uri (Uri). Hyperlink reference. 
id 
A string. unique identifier. 
@baseType 
A string. When sub-classing, this defines the super-class. 
@schemaLocation 
An uri (Uri). A URI to a JSON-Schema file that defines additional attributes and 
relationships. 
@type 
A string. When sub-classing, this defines the sub-class Extensible name. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 61 of 135 
Json representation sample 
We provide below the json representation of an example of a 'BalanceAction' resource object 
{ 
    "href": "https:/host:port/tmf-api/balanceAction/v1/balanceAction/a Uri ...", 
    "id": "a Uri ...", 
    "amount": {}, 
    "bucket": {}, 
    "channel": {}, 
    "confirmationDate": "2020-07-16T00:00", 
    "description": "This  balance action ...", 
    "impactedBucket": [ 
        {} 
    ], 
    "logicalResource": {}, 
    "partyAccount": {}, 
    "product": {}, 
    "reason": "a string ...", 
    "relatedParty": [ 
        {} 
    ], 
    "requestedDate": "2020-07-16T00:00", 
    "requestor": {}, 
    "status": "a string ...", 
    "usageType": "a string ..." 
} 
Bucket Status Example Type resource 
Possible values for the bucket status are (for example active,suspended,expired). 
Resource model 
 
Json representation sample 
We provide below the json representation of an example of a 'BucketStatusExampleType' resource object 
{ 
    "status": "active" 
} 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 62 of 135 
Notification Resource Models 
 
27 notifications are defined for this API 
Notifications related to Bucket: 
    - BucketCreateEvent 
    - BucketDeleteEvent 
    - BucketAttributeValueChangeEvent 
Notifications related to TopupBalance: 
    - TopupBalanceCreateEvent 
    - TopupBalanceCancelEvent 
    - TopupBalanceFailureEvent 
    - TopupBalanceAttributeValueChangeEvent 
    - TopupBalanceStatusChangeEvent 
    - TopupBalanceDeleteEvent 
Notifications related to AdjustBalance: 
    - AdjustBalanceCreateEvent 
    - AdjustBalanceCancelEvent 
    - AdjustBalanceFailureEvent 
    - AdjustBalanceAttributeValueChangeEvent 
    - AdjustBalanceStatusChangeEvent 
    - AdjustBalanceDeleteEvent 
Notifications related to TransferBalance: 
    - TransferBalanceCreateEvent 
    - TransferBalanceCancelEvent 
    - TransferBalanceFailureEvent 
    - TransferBalanceAttributeValueChangeEvent 
    - TransferBalanceStatusChangeEvent 
    - TransferBalanceDeleteEvent 
Notifications related to ReserveBalance: 
    - ReserveBalanceCreateEvent 
    - ReserveBalanceCancelEvent 
    - ReserveBalanceFailureEvent 
    - ReserveBalanceAttributeValueChangeEvent 
    - ReserveBalanceStatusChangeEvent 
    - ReserveBalanceDeleteEvent 
The notification structure for all notifications in this API follow the pattern depicted by the figure below. 
A notification event resource (depicted by "SpecificEvent" placeholder) is a sub class of a generic Event structure 
containing at least an id of the event occurrence (eventId), an event timestamp (eventTime), and the name of the 
resource (eventType). 
This notification structure owns an event payload structure ("SpecificEventPayload" placeholder) linked to the 
resource concerned by the notification using the resource name as access field ("resourceName" placeholder). 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 63 of 135 
 
Bucket Create Event 
Notification BucketCreateEvent case for resource Bucket 
Json representation sample 
We provide below the json representation of an example of a 'BucketCreateEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"BucketCreateEvent", 
     "event": { 
        "bucket" :  


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 64 of 135 
            {-- SEE Bucket RESOURCE SAMPLE --} 
    } 
} 
 
Bucket Delete Event 
Notification BucketDeleteEvent case for resource Bucket 
Json representation sample 
We provide below the json representation of an example of a 'BucketDeleteEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"BucketDeleteEvent", 
     "event": { 
        "bucket" :  
            {-- SEE Bucket RESOURCE SAMPLE --} 
    } 
} 
 
Bucket Attribute Value Change Event 
Notification BucketAttributeValueChangeEvent case for resource Bucket 
Json representation sample 
We provide below the json representation of an example of a 'BucketAttributeValueChangeEvent' notification event 
object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"BucketAttributeValueChangeEvent", 
     "event": { 
        "bucket" :  
            {-- SEE Bucket RESOURCE SAMPLE --} 
    } 
} 
 
Topup Balance Create Event 
Notification TopupBalanceCreateEvent case for resource TopupBalance 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalanceCreateEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TopupBalanceCreateEvent", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 65 of 135 
     "event": { 
        "topupBalance" :  
            {-- SEE TopupBalance RESOURCE SAMPLE --} 
    } 
} 
 
Topup Balance Cancel Event 
Notification TopupBalanceCancelEvent case for resource TopupBalance 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalanceCancelEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TopupBalanceCancelEvent", 
     "event": { 
        "topupBalance" :  
            {-- SEE TopupBalance RESOURCE SAMPLE --} 
    } 
} 
 
Topup Balance Failure Event 
Notification TopupBalanceFailureEvent case for resource TopupBalance 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalanceFailureEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TopupBalanceFailureEvent", 
     "event": { 
        "topupBalance" :  
            {-- SEE TopupBalance RESOURCE SAMPLE --} 
    } 
} 
 
Topup Balance Attribute Value Change Event 
Notification TopupBalanceAttributeValueChangeEvent case for resource TopupBalance 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalanceAttributeValueChangeEvent' notification 
event object 
{ 
    "eventId":"00001", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 66 of 135 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TopupBalanceAttributeValueChangeEvent", 
     "event": { 
        "topupBalance" :  
            {-- SEE TopupBalance RESOURCE SAMPLE --} 
    } 
} 
 
Topup Balance Status Change Event 
Notification TopupBalanceStatusChangeEvent case for resource TopupBalance 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalanceStatusChangeEvent' notification event 
object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TopupBalanceStatusChangeEvent", 
     "event": { 
        "topupBalance" :  
            {-- SEE TopupBalance RESOURCE SAMPLE --} 
    } 
} 
 
Topup Balance Delete Event 
Notification TopupBalanceDeleteEvent case for resource TopupBalance 
Json representation sample 
We provide below the json representation of an example of a 'TopupBalanceDeleteEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TopupBalanceDeleteEvent", 
     "event": { 
        "topupBalance" :  
            {-- SEE TopupBalance RESOURCE SAMPLE --} 
    } 
} 
 
Adjust Balance Create Event 
Notification AdjustBalanceCreateEvent case for resource AdjustBalance 
Json representation sample 
We provide below the json representation of an example of an 'AdjustBalanceCreateEvent' notification event object 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 67 of 135 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"AdjustBalanceCreateEvent", 
     "event": { 
        "adjustBalance" :  
            {-- SEE AdjustBalance RESOURCE SAMPLE --} 
    } 
} 
 
Adjust Balance Cancel Event 
Notification AdjustBalanceCancelEvent case for resource AdjustBalance 
Json representation sample 
We provide below the json representation of an example of an 'AdjustBalanceCancelEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"AdjustBalanceCancelEvent", 
     "event": { 
        "adjustBalance" :  
            {-- SEE AdjustBalance RESOURCE SAMPLE --} 
    } 
} 
 
Adjust Balance Failure Event 
Notification AdjustBalanceFailureEvent case for resource AdjustBalance 
Json representation sample 
We provide below the json representation of an example of an 'AdjustBalanceFailureEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"AdjustBalanceFailureEvent", 
     "event": { 
        "adjustBalance" :  
            {-- SEE AdjustBalance RESOURCE SAMPLE --} 
    } 
} 
 
Adjust Balance Attribute Value Change Event 
Notification AdjustBalanceAttributeValueChangeEvent case for resource AdjustBalance 
Json representation sample 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 68 of 135 
We provide below the json representation of an example of an 'AdjustBalanceAttributeValueChangeEvent' 
notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"AdjustBalanceAttributeValueChangeEvent", 
     "event": { 
        "adjustBalance" :  
            {-- SEE AdjustBalance RESOURCE SAMPLE --} 
    } 
} 
 
Adjust Balance Status Change Event 
Notification AdjustBalanceStatusChangeEvent case for resource AdjustBalance 
Json representation sample 
We provide below the json representation of an example of an 'AdjustBalanceStatusChangeEvent' notification event 
object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"AdjustBalanceStatusChangeEvent", 
     "event": { 
        "adjustBalance" :  
            {-- SEE AdjustBalance RESOURCE SAMPLE --} 
    } 
} 
 
Adjust Balance Delete Event 
Notification AdjustBalanceDeleteEvent case for resource AdjustBalance 
Json representation sample 
We provide below the json representation of an example of an 'AdjustBalanceDeleteEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"AdjustBalanceDeleteEvent", 
     "event": { 
        "adjustBalance" :  
            {-- SEE AdjustBalance RESOURCE SAMPLE --} 
    } 
} 
 
Transfer Balance Create Event 
Notification TransferBalanceCreateEvent case for resource TransferBalance 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 69 of 135 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalanceCreateEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TransferBalanceCreateEvent", 
     "event": { 
        "transferBalance" :  
            {-- SEE TransferBalance RESOURCE SAMPLE --} 
    } 
} 
 
Transfer Balance Cancel Event 
Notification TransferBalanceCancelEvent case for resource TransferBalance 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalanceCancelEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TransferBalanceCancelEvent", 
     "event": { 
        "transferBalance" :  
            {-- SEE TransferBalance RESOURCE SAMPLE --} 
    } 
} 
 
Transfer Balance Failure Event 
Notification TransferBalanceFailureEvent case for resource TransferBalance 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalanceFailureEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TransferBalanceFailureEvent", 
     "event": { 
        "transferBalance" :  
            {-- SEE TransferBalance RESOURCE SAMPLE --} 
    } 
} 
 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 70 of 135 
Transfer Balance Attribute Value Change Event 
Notification TransferBalanceAttributeValueChangeEvent case for resource TransferBalance 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalanceAttributeValueChangeEvent' 
notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TransferBalanceAttributeValueChangeEvent", 
     "event": { 
        "transferBalance" :  
            {-- SEE TransferBalance RESOURCE SAMPLE --} 
    } 
} 
 
Transfer Balance Status Change Event 
Notification TransferBalanceStatusChangeEvent case for resource TransferBalance 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalanceStatusChangeEvent' notification event 
object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TransferBalanceStatusChangeEvent", 
     "event": { 
        "transferBalance" :  
            {-- SEE TransferBalance RESOURCE SAMPLE --} 
    } 
} 
 
Transfer Balance Delete Event 
Notification TransferBalanceDeleteEvent case for resource TransferBalance 
Json representation sample 
We provide below the json representation of an example of a 'TransferBalanceDeleteEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"TransferBalanceDeleteEvent", 
     "event": { 
        "transferBalance" :  
            {-- SEE TransferBalance RESOURCE SAMPLE --} 
    } 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 71 of 135 
} 
 
Reserve Balance Create Event 
Notification ReserveBalanceCreateEvent case for resource ReserveBalance 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalanceCreateEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"ReserveBalanceCreateEvent", 
     "event": { 
        "reserveBalance" :  
            {-- SEE ReserveBalance RESOURCE SAMPLE --} 
    } 
} 
 
Reserve Balance Cancel Event 
Notification ReserveBalanceCancelEvent case for resource ReserveBalance 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalanceCancelEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"ReserveBalanceCancelEvent", 
     "event": { 
        "reserveBalance" :  
            {-- SEE ReserveBalance RESOURCE SAMPLE --} 
    } 
} 
 
Reserve Balance Failure Event 
Notification ReserveBalanceFailureEvent case for resource ReserveBalance 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalanceFailureEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"ReserveBalanceFailureEvent", 
     "event": { 
        "reserveBalance" :  
            {-- SEE ReserveBalance RESOURCE SAMPLE --} 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 72 of 135 
    } 
} 
 
Reserve Balance Attribute Value Change Event 
Notification ReserveBalanceAttributeValueChangeEvent case for resource ReserveBalance 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalanceAttributeValueChangeEvent' 
notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"ReserveBalanceAttributeValueChangeEvent", 
     "event": { 
        "reserveBalance" :  
            {-- SEE ReserveBalance RESOURCE SAMPLE --} 
    } 
} 
 
Reserve Balance Status Change Event 
Notification ReserveBalanceStatusChangeEvent case for resource ReserveBalance 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalanceStatusChangeEvent' notification event 
object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"ReserveBalanceStatusChangeEvent", 
     "event": { 
        "reserveBalance" :  
            {-- SEE ReserveBalance RESOURCE SAMPLE --} 
    } 
} 
 
Reserve Balance Delete Event 
Notification ReserveBalanceDeleteEvent case for resource ReserveBalance 
Json representation sample 
We provide below the json representation of an example of a 'ReserveBalanceDeleteEvent' notification event object 
{ 
    "eventId":"00001", 
    "eventTime":"2015-11-16T16:42:25-04:00", 
    "eventType":"ReserveBalanceDeleteEvent", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 73 of 135 
     "event": { 
        "reserveBalance" :  
            {-- SEE ReserveBalance RESOURCE SAMPLE --} 
    } 
} 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 74 of 135 
 API OPERATIONS 
Remember the following Uniform Contract: 
Operation on Entities 
Uniform API Operation 
Description 
Query Entities 
GET Resource 
GET must be used to 
retrieve a representation of 
a resource. 
 
Create Entity 
POST Resource 
POST must be used to 
create a new resource 
Partial Update of an Entity 
PATCH Resource 
PATCH must be used to 
partially update a resource 
Complete Update of an 
Entity 
PUT Resource 
PUT must be used to 
completely update a 
resource identified by its 
resource URI  
Remove an Entity 
DELETE Resource 
DELETE must be used to 
remove a resource 
Execute an Action on an 
Entity  
POST on TASK Resource 
POST must be used to 
execute Task Resources 
Other Request Methods 
POST on TASK Resource 
GET and POST must not 
be used to tunnel other 
request methods. 
 
Filtering and attribute selection rules are described in the TMF REST Design Guidelines. 
Notifications are also described in a subsequent section. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 75 of 135 
Operations on Bucket 
List buckets 
  GET /bucket?fields=...&{filtering} 
Description 
This operation list bucket entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Fetch the bucket balances for the product prd1'. The query parameters are :-  
product.id='prd1')] 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/bucket 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "11", 
        "href": "prepayBalanceManagement/v4/bucket/11", 
        "description": "this bucket holds the amount available", 
        "name": "bucket for prd1", 
        "@type": "Bucket", 
        "remainingValue": { 
            "amount": 50, 
            "units": "EUR" 
        }, 
        "remainingValueName": "bucket for prd1", 
        "usageType": "monetary", 
        "partyAccount": { 
            "id": "acc1", 
            "href": "/accountManagement/v4/account/acc1" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "logicalResource": { 
            "id": "4", 
            "href": "/resouceInventoryManagement/logicalResource/4" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 76 of 135 
        }, 
        "relatedParty": [ 
            { 
                "id": "cust1", 
                "href": "/partyManagement/customer/cust1", 
                "name": "jerry watts", 
                "role": "customer" 
            } 
        ], 
        "bucketBalance": [ 
            { 
                "remainingValue": { 
                    "amount": 500, 
                    "units": "minutes" 
                }, 
                "remainingValueName": "500 minutes of calls left", 
                "usageType": "voice" 
            } 
        ], 
        "validFor": { 
            "endDateTime": "2020-01-12T23:20:50.52Z", 
            "startDateTime": "2020-03-12T23:20:50.52Z" 
        } 
    } 
] 
 
 
Fetch the bucket balances for all products that have a monetary usage type. The query parameters are :-  
usageType='monetary' 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/bucket 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "11", 
        "href": "prepayBalanceManagement/v4/bucket/11", 
        "description": "this bucket holds the amount available", 
        "name": "bucket for prd1", 
        "@type": "Bucket", 
        "remainingValue": { 
            "amount": 50, 
            "units": "EUR" 
        }, 
        "remainingValueName": "bucket for prd1", 
        "usageType": "monetary", 
        "partyAccount": { 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 77 of 135 
            "id": "acc1", 
            "href": "/accountManagement/v4/account/acc1" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "logicalResource": { 
            "id": "4", 
            "href": "/resouceInventoryManagement/logicalResource/4" 
        }, 
        "relatedParty": [ 
            { 
                "id": "cust1", 
                "href": "/partyManagement/customer/cust1", 
                "name": "jerry watts", 
                "role": "customer" 
            } 
        ], 
        "bucketBalance": [ 
            { 
                "remainingValue": { 
                    "amount": 50, 
                    "units": "MB" 
                }, 
                "remainingValueName": "50 MB of promotional data left", 
                "usageType": "data" 
            }, 
            { 
                "remainingValue": { 
                    "amount": 500, 
                    "units": "minutes" 
                }, 
                "remainingValueName": "500 minutes of calls left", 
                "usageType": "voice" 
            } 
        ], 
        "validFor": { 
            "endDateTime": "2020-01-12T23:20:50.52Z", 
            "startDateTime": "2020-03-12T23:20:50.52Z" 
        } 
    }, 
    { 
        "id": "12", 
        "href": "prepayBalanceManagement/v4/bucket/12", 
        "description": "this bucket holds the amount available", 
        "name": "bucket for prd1", 
        "@type": "Bucket", 
        "remainingValue": { 
            "amount": 100, 
            "units": "EUR" 
        }, 
        "remainingValueName": "bucket for prd2", 
        "usageType": "monetary", 
        "partyAccount": { 
            "id": "acc1", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 78 of 135 
            "href": "/accountManagement/v4/account/acc1" 
        }, 
        "product": { 
            "id": "prd2", 
            "href": "/productInventory/v4/product/prd2" 
        }, 
        "logicalResource": { 
            "id": "4", 
            "href": "/resouceInventoryManagement/logicalResource/4" 
        }, 
        "relatedParty": [ 
            { 
                "id": "cust1", 
                "href": "/partyManagement/customer/cust1", 
                "name": "jerry watts", 
                "role": "customer" 
            } 
        ], 
        "bucketBalance": [ 
            { 
                "remainingValue": { 
                    "amount": 50, 
                    "units": "MB" 
                }, 
                "remainingValueName": "50 MB of promotional data left", 
                "usageType": "data" 
            } 
        ], 
        "validFor": { 
            "endDateTime": "2020-01-12T23:20:50.52Z", 
            "startDateTime": "2020-03-12T23:20:50.52Z" 
        } 
    } 
] 
 
Retrieve bucket 
  GET /bucket/{id}?fields=...&{filtering} 
Description 
This operation retrieves a bucket entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Retrieve a Bucket resource based on its id 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/bucket/43 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 79 of 135 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "id": "11", 
    "href": "prepayBalanceManagement/v4/bucket/11", 
    "description": "this bucket holds the amount available", 
    "name": "bucket for prd1", 
    "@type": "Bucket", 
    "remainingValue": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "remainingValueName": "bucket for prd1", 
    "usageType": "monetary", 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "logicalResource": { 
        "id": "4", 
        "href": "/resouceInventoryManagement/logicalResource/4" 
    }, 
    "relatedParty": [ 
        { 
            "id": "cust1", 
            "href": "/partyManagement/customer/cust1", 
            "name": "jerry watts", 
            "role": "customer" 
        } 
    ], 
    "bucketBalance": [ 
        { 
            "remainingValue": { 
                "amount": 50, 
                "units": "MB" 
            }, 
            "remainingValueName": "50 MB of promotional data left", 
            "usageType": "data" 
        }, 
        { 
            "remainingValue": { 
                "amount": 500, 
                "units": "minutes" 
            }, 
            "remainingValueName": "500 minutes of calls left", 
            "usageType": "voice" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 80 of 135 
        } 
    ], 
    "validFor": { 
        "endDateTime": "2020-01-12T23:20:50.52Z", 
        "startDateTime": "2020-03-12T23:20:50.52Z" 
    } 
} 
 
Create bucket 
  POST /bucket 
Description 
This operation creates a bucket entity. 
Mandatory and Non Mandatory Attributes 
The following tables provide the list of mandatory and non mandatory attributes when creating a Bucket, including 
any possible rule conditions and applicable default values. Notice that it is up to an implementer to add additional 
mandatory attributes. 
Mandatory Attributes 
Rule 
usageType 
 
 
Non Mandatory Attributes 
Rule 
@baseType 
 
@schemaLocation 
 
@type 
 
description 
 
isShared 
 
logicalResource 
 
name 
 
partyAccount 
 
product 
 
relatedParty 
 
remainingValue 
 
remainingValueName 
 
reservedValue 
 
status 
 
validFor 
 
 
Usage Samples 
Create a Bucket. Only allowed by administrators. The usageType is mandatory and could be linked to a product by 
default, hence product is not required 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/bucket 
Content-Type: application/json 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 81 of 135 
{ 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "usageType": "monetary", 
    "product": [ 
        { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        } 
    ], 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/v4/customer/22", 
            "name": "jerry wilson", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "11", 
    "href": "prepayBalanceManagement/v4/bucket/11", 
    "description": "this bucket holds the amount available", 
    "name": "bucket for prd1", 
    "@type": "Bucket", 
    "remainingValue": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "remainingValueName": "bucket for prd1", 
    "usageType": "monetary", 
    "product": [ 
        { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        } 
    ], 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/v4/customer/5", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 82 of 135 
            "name": "jerry wilson", 
            "role": "customer" 
        } 
    ], 
    "validFor": { 
        "endDateTime": "2020-01-12T23:20:50.52Z", 
        "startDateTime": "2020-03-12T23:20:50.52Z" 
    } 
} 
 
Delete bucket 
  DELETE /bucket/{id} 
Description 
This operation deletes a bucket entity. 
 
Usage Samples 
This operation deletes a Bucket resource using the unique id of the bucket 
 
Request 
 
DELETE /tmf-api/prepayBalanceManagement/v4/bucket/11 
 
 
 
Response 
 
204 
 
 
Operations on Topup Balance 
List topup balances 
  GET /topupBalance?fields=...&{filtering} 
Description 
This operation list topup balance entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 83 of 135 
Fetch the balance topups for the product prd1. The query parameters are :-  
product.id=prd1 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/topupBalance 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/topupBalance/1", 
        "reason": "added 20 MB of data", 
        "description": "topup with 20 MB of data to the balance", 
        "bucket": { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "isAutoTopup": "false", 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "00442123142323" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 84 of 135 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
 
Fetch the balance topups for the product prd1 and usageType 'data'. The query parameters are :-  
product.id=prd1&usageType=data.  
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/topupBalance 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/topupBalance/1", 
        "reason": "added 20 MB of data", 
        "description": "added 20 MB of data to the balance", 
        "bucket": { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "usageType": "data", 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "isAutoTopup": "false", 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "00442123142323" 
        }, 
        "relatedParty": [ 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 85 of 135 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
Retrieve topup balance 
  GET /topupBalance/{id}?fields=...&{filtering} 
Description 
This operation retrieves a topup balance entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Retrieve a TopupBalance resource based on its id 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/topupBalance/43 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "prepayBalanceManagement/v4/topupBalance/1", 
    "reason": "added 20 MB of data", 
    "description": "added 20 MB of data to the balance", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 86 of 135 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "isAutoTopup": "false", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 
        "@type": "MSISDN", 
        "@baseType": "logicalResource", 
        "lifecycleState": "active", 
        "value": "00442123142323" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
 
Create topup balance 
  POST /topupBalance 
Description 
This operation creates a topup balance entity. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 87 of 135 
Mandatory and Non Mandatory Attributes 
The following tables provide the list of mandatory and non mandatory attributes when creating a TopupBalance, 
including any possible rule conditions and applicable default values. Notice that it is up to an implementer to add 
additional mandatory attributes. 
Mandatory Attributes 
Rule 
amount 
 
 
Non Mandatory Attributes 
Rule 
confirmationDate 
 
description 
 
reason 
 
requestedDate 
 
status 
 
usageType 
 
@baseType 
 
@schemaLocation 
 
@type 
 
isAutoTopup 
 
numberOfPeriods 
 
payment 
 
paymentMethod 
 
recurringPeriod 
 
relatedTopupBalance 
 
voucher 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
relatedParty 
 
requestor 
 
 
Usage Samples 
Topup a balance with a monetary value specifying the Bucket by id and a voucher that has been purchased out of 
band. The amount is used to specify the amount to topup the balance 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/topupBalance 
Content-Type: application/json 
 
{ 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "reason": "customer topped up the balance with 50 Euro", 
    "voucher": "2E1C8230F6EA1D5F", 
    "channel": { 
        "id": "99", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 88 of 135 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/v4/customer/22", 
            "name": "jerry wilson", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/topupBalance/1", 
    "bucket": { 
        "id": "1", 
        "href": "/prepayBalanceManagement/v4/bucket/1" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22" 
    }, 
    "status": "confirmed", 
    "reason": "The customer topped up with 50 Euro", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/v4/customer/22" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 89 of 135 
    "confirmationDate": "1985-04-12T23:20:50.52Z" 
} 
 
 
Topup a balance with a monetary value specifying the PartyAccount by reference, the paymentMethod by reference 
(in this case a credit card) and a usageType. The amount is used to specify the amount to topup the balance. 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/topupBalance 
Content-Type: application/json 
 
{ 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/v4/customer/22" 
    }, 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "paymentMethod": { 
        "id": "22", 
        "href": "/paymentMethods/v1/paymentMethod/2", 
        "type": "credit-card" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "usageType": "data", 
    "amount": { 
        "amount": 500, 
        "units": "MB" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/topupBalance/1", 
    "bucket": { 
        "id": "1", 
        "href": "/prepayBalanceManagement/v4/bucket/1" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22" 
    }, 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 90 of 135 
    "status": "confirmed", 
    "reason": "The customer topped up with 50 Euro", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/v4/customer/22" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z" 
} 
 
 
Topup a balance with a monetary value specifying the PartyAccount by reference, the paymentMethod by reference 
(in this case a credit card) and a usageType. The topup is an autotopup. The amount is used to specify the amount 
to topup the balance. Note the receiver bucket targeted by this transfer must be of the same usageType 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/topupBalance 
Content-Type: application/json 
 
{ 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/v4/customer/22" 
    }, 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "isAutoTopup": true, 
    "recurringPeriod": "monthly", 
    "numberOfPeriods": 3, 
    "paymentMethod": { 
        "id": "22", 
        "href": "/paymentMethods/v1/paymentMethod/2", 
        "type": "credit-card" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "usageType": "data", 
    "amount": { 
        "amount": 500, 
        "units": "MB" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 91 of 135 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/topupBalance/1", 
    "bucket": { 
        "id": "1", 
        "href": "/prepayBalanceManagement/v4/bucket/1" 
    }, 
    "relatedTopupBalance": { 
        "id": "55", 
        "href": "/prepayBalanceManagement/v4/topupBalance/55" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22" 
    }, 
    "status": "confirmed", 
    "reason": "The customer topped up with 50 Euro", 
    "validFor": { 
        "endDateTime": "1985-04-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/v4/customer/22" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z" 
} 
 
Patch topup balance 
  PATCH /topupBalance/{id} 
Description 
This operation allows partial updates of a topup balance entity. Support of json/merge 
(https://tools.ietf.org/html/rfc7386) is mandatory, support of json/patch (http://tools.ietf.org/html/rfc5789) is optional. 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 92 of 135 
Note: If the update operation yields to the creation of sub-resources or relationships, the same rules concerning 
mandatory sub-resource attributes and default value settings in the POST operation applies to the PATCH operation.  
Hence these tables are not repeated here. 
Patchable and Non Patchable Attributes 
The tables below provide the list of patchable and non patchable attributes, including constraint rules on their usage. 
Patchable Attributes 
Rule 
status 
 
reason 
 
requestor 
 
relatedParty 
 
 
Non Patchable Attributes 
Rule 
confirmationDate 
 
description 
 
href 
 
id 
 
requestedDate 
 
usageType 
 
href 
 
id 
 
@baseType 
 
@schemaLocation 
 
@type 
 
isAutoTopup 
 
numberOfPeriods 
 
payment 
 
paymentMethod 
 
recurringPeriod 
 
relatedTopupBalance 
 
voucher 
 
amount 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
 
Usage Samples 
Cancel the TopupBalance. 
Changing the status to cancelled (using merge-patch+json), specifying the reason and the requested date as well as 
the channel and the requestor 
 
Request 
 
PATCH /tmf-api/prepayBalanceManagement/v4/topupBalance/42 
Content-Type: application/merge-patch+json 
 
{ 
    "status": "cancelled", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 93 of 135 
    "reason": "Customer requests cancellation", 
    "requestedDate": "2020-02-11T23:20:50.52Z", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/topupBalance/1", 
    "status": "cancelled", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
 
Delete topup balance 
  DELETE /topupBalance/{id} 
Description 
This operation deletes a topup balance entity. 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 94 of 135 
Usage Samples 
This operation deletes a TopupBalance resource using the unique id of the balance topup 
 
Request 
 
DELETE /tmf-api/prepayBalanceManagement/v4/topupBalance/11 
 
 
 
Response 
 
204 
 
 
Operations on Adjust Balance 
List adjust balances 
  GET /adjustBalance?fields=...&{filtering} 
Description 
This operation list adjust balance entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Fetch the adjust balance resources for the product prd1. The query parameters are :-  
product.id=prd1 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/adjustBalance 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/topupBalance/1", 
        "reason": "added 20 MB of data", 
        "description": "added 20 MB of data to the balance", 
        "bucket": { 
            "id": "11", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 95 of 135 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "adjustType": "oneTimeDeduct", 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "00442123142323" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
 
Fetch the adjust balance resources for the product prd1. The query parameters are :-  
  
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/adjustBalance 
Accept: application/json 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 96 of 135 
Response 
 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/topupBalance/1", 
        "reason": "added 20 MB of data", 
        "description": "added 20 MB of data to the balance", 
        "bucket": { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "adjustType": "oneTimeDeduct", 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "00442123142323" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 97 of 135 
Retrieve adjust balance 
  GET /adjustBalance/{id}?fields=...&{filtering} 
Description 
This operation retrieves an adjust balance entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Retrieve an adjust balance resource based on its id 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/adjustBalance/43 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "prepayBalanceManagement/v4/topupBalance/1", 
    "reason": "added 20 MB of data", 
    "description": "added 20 MB of data to the balance", 
    "@type": "AdjustBalance", 
    "@baseType": "Action", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "adjustType": "oneTimeDeduct", 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 
        "@type": "MSISDN", 
        "@baseType": "logicalResource", 
        "lifecycleState": "active", 
        "value": "00442123142323" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 98 of 135 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
 
Create adjust balance 
  POST /adjustBalance 
Description 
This operation creates an adjust balance entity. 
Mandatory and Non Mandatory Attributes 
The following tables provide the list of mandatory and non mandatory attributes when creating an AdjustBalance, 
including any possible rule conditions and applicable default values. Notice that it is up to an implementer to add 
additional mandatory attributes. 
Mandatory Attributes 
Rule 
amount 
 
 
Non Mandatory Attributes 
Rule 
confirmationDate 
 
description 
 
reason 
 
requestedDate 
 
status 
 
usageType 
 
@baseType 
 
@schemaLocation 
 
@type 
 
adjustType 
 
bucket 
 
channel 
 
impactedBucket 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 99 of 135 
Non Mandatory Attributes 
Rule 
logicalResource 
 
partyAccount 
 
product 
 
relatedParty 
 
requestor 
 
 
Usage Samples 
Adjust a balance with a monetary value specifying the Bucket by id. The amount is used to specify the amount to 
adjust the balance by 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/adjustBalance 
Content-Type: application/json 
 
{ 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/balanceAdjust/1", 
    "status": "confirmed", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "requestedDate": "1985-04-12T23:20:50.52Z" 
} 
 
 
Adjust a balance with a monetary value specifying the Party Account id  and usageType. The amount is used to 
specify the amount to adjust the balance by. 
 
Request 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 100 of 135 
POST /tmf-api/prepayBalanceManagement/v4/adjustBalance 
Content-Type: application/json 
 
{ 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/customer/22" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "usageType": "monetary", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/balanceAdjust/1", 
    "status": "confirmed", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "requestedDate": "1985-04-12T23:20:50.52Z" 
} 
 
 
Adjust a balance with a monetary value specifying the Party Account id  and usageType. The amount is used to 
specify the amount to adjust the balance by. The amount is deducted by the service provider as a fee. This 
information is captured in the adjustType and reason attributes 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/adjustBalance 
Content-Type: application/json 
 
{ 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "partyAccount": { 
        "id": "22", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 101 of 135 
        "href": "/partyManagement/customer/22" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "adjustType": "subscriber_fee", 
    "reason": "deduction as a subscriber fee for mp3 download", 
    "usageType": "monetary", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/balanceAdjust/1", 
    "status": "confirmed", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "requestedDate": "1985-04-12T23:20:50.52Z" 
} 
 
 
Adjust a balance with a monetary value specifying the Party Account id  and usageType. The amount is used to 
specify the amount to adjust the balance by. The amount is credited by the service provider to the customer for a 
charging error. This information is captured in the adjustType and reason attributes 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/adjustBalance 
Content-Type: application/json 
 
{ 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "partyAccount": { 
        "id": "22", 
        "href": "/partyManagement/customer/22" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "adjustType": "subscriber_refund", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 102 of 135 
    "reason": "increment balance as a subscriber has been overcharged", 
    "usageType": "monetary", 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/balanceAdjust/1", 
    "status": "confirmed", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "requestedDate": "1985-04-12T23:20:50.52Z" 
} 
 
Patch adjust balance 
  PATCH /adjustBalance/{id} 
Description 
This operation allows partial updates of an adjust balance entity. Support of json/merge 
(https://tools.ietf.org/html/rfc7386) is mandatory, support of json/patch (http://tools.ietf.org/html/rfc5789) is optional. 
 
Note: If the update operation yields to the creation of sub-resources or relationships, the same rules concerning 
mandatory sub-resource attributes and default value settings in the POST operation applies to the PATCH operation.  
Hence these tables are not repeated here. 
Patchable and Non Patchable Attributes 
The tables below provide the list of patchable and non patchable attributes, including constraint rules on their usage. 
Patchable Attributes 
Rule 
status 
 
 
Non Patchable Attributes 
Rule 
confirmationDate 
 
description 
 
href 
 
id 
 
reason 
 
requestedDate 
 
usageType 
 
href 
 
id 
 
@baseType 
 
@schemaLocation 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 103 of 135 
Non Patchable Attributes 
Rule 
@type 
 
adjustType 
 
amount 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
relatedParty 
 
requestor 
 
 
Usage Samples 
Cancel the AdjustBalance. 
Changing the status to cancelled (using merge-patch+json). 
 
Request 
 
PATCH /tmf-api/prepayBalanceManagement/v4/adjustBalance/42 
Content-Type: application/merge-patch+json 
 
{ 
    "status": "cancelled", 
    "reason": "Customer requests cancellation", 
    "requestedDate": "2020-02-11T23:20:50.52Z", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/balanceAdjust/1", 
    "status": "cancelled" 
} 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 104 of 135 
Delete adjust balance 
  DELETE /adjustBalance/{id} 
Description 
This operation deletes an adjust balance entity. 
 
Usage Samples 
This operation deletes an adjust balance resource using the unique id of the balance adjust 
 
Request 
 
DELETE /tmf-api/prepayBalanceManagement/v4/adjustBalance/11 
 
 
 
Response 
 
204 
 
 
Operations on Transfer Balance 
List transfer balances 
  GET /transferBalance?fields=...&{filtering} 
Description 
This operation list transfer balance entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Fetch the transfer balance resources for the product prd1. The query parameters are :-  
product.id=prd1 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/transferBalance?product.id=prd1 
Accept: application/json 
 
 
 
Response 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 105 of 135 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/transferBalance/1", 
        "reason": "transferring 20 Euros as a gift to a relative", 
        "description": "balance transfer", 
        "bucket": { 
            "@type": "Bucket", 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11", 
            "remainingValue": { 
                "@type": "Quantity", 
                "amount": 20, 
                "unit": "EUR" 
            }, 
            "usageType": "monetary" 
        }, 
        "receiverBucket": { 
            "id": "15", 
            "href": "/prepayBalanceManagement/v4/bucket/15" 
        }, 
        "receiverBucketType": "data", 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "receiverProduct": { 
            "id": "prd2", 
            "href": "/productInventory/v4/product/prd2" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "00442123142323" 
        }, 
        "receiverLogicalResource": { 
            "id": "29", 
            "href": "/resourceInventoryManagement/v4/logicalResource/29", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "0044212315555" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 106 of 135 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "receiver": { 
            "id": "99", 
            "href": "/partyManagement/v4/customer/22", 
            "name": "jack hat", 
            "role": "customer" 
        }, 
        "costOwner": "originator", 
        "transferCost": { 
            "unit": "EUR", 
            "value": "0.5" 
        }, 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
 
Fetch the adjust balance resources for the product prd1. The query parameters are :-  
product.id=prd1 & logicalResource.value=004433232323  
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/transferBalance?product.id=prd1&logicalResource.value=004433232323 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/transferBalance/1", 
        "reason": "transferring 20 Euros as a gift to a relative", 
        "description": "balance transfer", 
        "bucket": { 
            "@type": "Bucket", 
            "id": "11", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 107 of 135 
            "href": "/prepayBalanceManagement/v4/bucket/11", 
            "remainingValue": { 
                "@type": "Quantity", 
                "amount": 20, 
                "unit": "EUR" 
            }, 
            "usageType": "monetary" 
        }, 
        "receiverBucket": { 
            "id": "15", 
            "href": "/prepayBalanceManagement/v4/bucket/15" 
        }, 
        "receiverBucketType": "data", 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "receiverProduct": { 
            "id": "prd2", 
            "href": "/productInventory/v4/product/prd2" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "00442123142323" 
        }, 
        "receiverLogicalResource": { 
            "id": "29", 
            "href": "/resourceInventoryManagement/v4/logicalResource/29", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "lifecycleState": "active", 
            "value": "0044212315555" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "receiver": { 
            "id": "99", 
            "href": "/partyManagement/v4/customer/22", 
            "name": "jack hat", 
            "role": "customer" 
        }, 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 108 of 135 
        "costOwner": "originator", 
        "transferCost": { 
            "unit": "EUR", 
            "value": "0.5" 
        }, 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
Retrieve transfer balance 
  GET /transferBalance/{id}?fields=...&{filtering} 
Description 
This operation retrieves a transfer balance entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Retrieve a TransferBalance resource based on its id 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/transferBalance/43 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "prepayBalanceManagement/v4/transferBalance/1", 
    "reason": "transferring 20 Euros as a gift to a relative", 
    "description": "balance transfer", 
    "bucket": { 
        "@type": "Bucket", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 109 of 135 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11", 
        "remainingValue": { 
            "@type": "Quantity", 
            "amount": 20, 
            "unit": "EUR" 
        }, 
        "usageType": "monetary" 
    }, 
    "receiverBucket": { 
        "id": "15", 
        "href": "/prepayBalanceManagement/v4/bucket/15" 
    }, 
    "receiverBucketType": "data", 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "receiverProduct": { 
        "id": "prd2", 
        "href": "/productInventory/v4/product/prd2" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 
        "@type": "MSISDN", 
        "@baseType": "logicalResource", 
        "lifecycleState": "active", 
        "value": "00442123142323" 
    }, 
    "receiverLogicalResource": { 
        "id": "29", 
        "href": "/resourceInventoryManagement/v4/logicalResource/29", 
        "@type": "MSISDN", 
        "@baseType": "logicalResource", 
        "lifecycleState": "active", 
        "value": "0044212315555" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "receiver": { 
        "id": "99", 
        "href": "/partyManagement/v4/customer/22", 
        "name": "jack hat", 
        "role": "customer" 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 110 of 135 
    }, 
    "costOwner": "originator", 
    "transferCost": { 
        "unit": "EUR", 
        "value": "0.5" 
    }, 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
 
Create transfer balance 
  POST /transferBalance 
Description 
This operation creates a transfer balance entity. 
Mandatory and Non Mandatory Attributes 
The following tables provide the list of mandatory and non mandatory attributes when creating a TransferBalance, 
including any possible rule conditions and applicable default values. Notice that it is up to an implementer to add 
additional mandatory attributes. 
Mandatory Attributes 
Rule 
amount 
 
 
Non Mandatory Attributes 
Rule 
confirmationDate 
 
description 
 
reason 
 
requestedDate 
 
status 
 
usageType 
 
@baseType 
 
@schemaLocation 
 
@type 
 
costOwner 
 
receiver 
 
receiverBucket 
 
receiverBucketUsageType 
 
receiverLogicalResource 
 
receiverPartyAccount 
 
receiverProduct 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 111 of 135 
Non Mandatory Attributes 
Rule 
requestor 
 
transferCost 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
relatedParty 
 
requestor 
 
 
Usage Samples 
Transfer a balance with a monetary value of 50 Euros specifying the receiver bucket by id and the source bucket by 
id . The amount is used to specify the amount to topup the balance. The transfer cost is 1 Euro and the transfer cost 
is paid against the Party Account owned by the owner of the source bucket 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/transferBalance 
Content-Type: application/json 
 
{ 
    "transferCost": { 
        "amount": 1, 
        "units": "EUR" 
    }, 
    "reason": "transferring 50 Euros as a gift to a relative", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "usageType": "monetary", 
    "bucket": { 
        "id": "22", 
        "href": "/prepayBalanceManagement/v4/bucket/22" 
    }, 
    "receiverBucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "costOwner": "originator", 
    "receiver": { 
        "id": "10", 
        "href": "/partyManagement/customer/32", 
        "name": "tom lewis", 
        "role": "customer" 
    }, 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 112 of 135 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/transferBalance/1", 
    "status": "pending" 
} 
 
 
Transfer a balance with a monetary value specifying the PartyAccount by reference, the paymentMethod by 
reference (in this case a credit card) and a usageType. The amount is used to specify the amount to topup the 
balance. Note the receiver bucket targeted by this transfer must be of the same usageType 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/transferBalance 
Content-Type: application/json 
 
{ 
    "amount": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "transferCost": { 
        "amount": 1, 
        "units": "EUR" 
    }, 
    "reason": "transferring 20 Euros as a gift to a relative", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "partyAccount": { 
        "id": "22", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 113 of 135 
        "href": "/partyManagement/customer/22" 
    }, 
    "paymentMethod": { 
        "id": "22", 
        "href": "/paymentMethods/v1/paymentMethod/2", 
        "type": "credit-card" 
    }, 
    "usageType": "monetary", 
    "receiverBucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/22" 
    }, 
    "costOwner": "originator", 
    "receiverProduct": { 
        "id": "prd2", 
        "href": "/productInventory/v4/product/prd2" 
    }, 
    "logicalResource": { 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "receiver": { 
        "id": "10", 
        "href": "/partyManagement/customer/32", 
        "name": "tom lewis", 
        "role": "customer" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/transferBalance/1", 
    "status": "pending" 
} 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 114 of 135 
Patch transfer balance 
  PATCH /transferBalance/{id} 
Description 
This operation allows partial updates of a transfer balance entity. Support of json/merge 
(https://tools.ietf.org/html/rfc7386) is mandatory, support of json/patch (http://tools.ietf.org/html/rfc5789) is optional. 
 
Note: If the update operation yields to the creation of sub-resources or relationships, the same rules concerning 
mandatory sub-resource attributes and default value settings in the POST operation applies to the PATCH operation.  
Hence these tables are not repeated here. 
Patchable and Non Patchable Attributes 
The tables below provide the list of patchable and non patchable attributes, including constraint rules on their usage. 
Patchable Attributes 
Rule 
status 
 
 
Non Patchable Attributes 
Rule 
confirmationDate 
 
description 
 
href 
 
id 
 
reason 
 
requestedDate 
 
usageType 
 
href 
 
id 
 
@baseType 
 
@schemaLocation 
 
@type 
 
costOwner 
 
receiver 
 
receiverBucket 
 
receiverBucketUsageType 
 
receiverLogicalResource 
 
receiverPartyAccount 
 
receiverProduct 
 
requestor 
 
transferCost 
 
amount 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
relatedParty 
 
requestor 
 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 115 of 135 
 
Usage Samples 
cancel a topup balance with the id 44. 
 
Request 
 
PATCH /tmf-api/prepayBalanceManagement/v4/transferBalance/42 
Content-Type: application/json 
 
{ 
    "status": "cancelled", 
    "reason": "Customer requests cancellation", 
    "requestedDate": "2020-02-11T23:20:50.52Z", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/transferBalance/44", 
    "status": "cancelled" 
} 
 
Delete transfer balance 
  DELETE /transferBalance/{id} 
Description 
This operation deletes a transfer balance entity. 
 
Usage Samples 
This operation deletes a transfer balance resource using the unique id of the transfer balance resource 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 116 of 135 
 
Request 
 
DELETE /tmf-api/prepayBalanceManagement/v4/transferBalance/11 
 
 
 
Response 
 
204 
 
 
Operations on Reserve Balance 
List reserve balances 
  GET /reserveBalance?fields=...&{filtering} 
Description 
This operation list reserve balance entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Fetch the reserve balances by usageType and Party Account. The query parameters are :-  
partyAccount.id=11,usageType=monetary 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/reserveBalance 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "1", 
        "href": "prepayBalanceManagement/v4/reserveBalance/1", 
        "reason": "reserved 20 MB of data", 
        "description": "reserved 20 MB of data to the balance", 
        "reservedValue": { 
            "amount": 20, 
            "units": "MB" 
        }, 
        "bucket": { 
            "id": "11", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 117 of 135 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "logicalResource": { 
            "id": "22", 
            "href": "/resourceInventoryManagement/v4/logicalResource/22", 
            "@type": "MSISDN", 
            "@baseType": "logicalResource", 
            "value": "00442123142323" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "requestedDate": "1985-04-11T23:20:50.52Z", 
        "confirmationDate": "1985-04-12T23:20:50.52Z", 
        "validFor": { 
            "endDateTime": "1985-05-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
Retrieve reserve balance 
  GET /reserveBalance/{id}?fields=...&{filtering} 
Description 
This operation retrieves a reserve balance entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 118 of 135 
Usage Samples 
Retrieve a ReserveBalance resource based on its id 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/reserveBalance/43 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "prepayBalanceManagement/v4/reserveBalance/1", 
    "reason": "reserved 20 MB of data", 
    "description": "reserved 20 MB of data to the balance", 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 
    "reservedValue": { 
        "amount": 20, 
        "units": "MB" 
    }, 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 
        "@type": "MSISDN", 
        "@baseType": "logicalResource", 
        "value": "00442123142323" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 119 of 135 
        "name": "jim jordan", 
        "role": "agent" 
    }, 
    "requestedDate": "1985-04-11T23:20:50.52Z", 
    "confirmationDate": "1985-04-12T23:20:50.52Z", 
    "validFor": { 
        "endDateTime": "1985-05-12T23:20:50.52Z", 
        "startDateTime": "1985-04-12T23:20:50.52Z" 
    } 
} 
 
Create reserve balance 
  POST /reserveBalance 
Description 
This operation creates a reserve balance entity. 
Mandatory and Non Mandatory Attributes 
The following tables provide the list of mandatory and non mandatory attributes when creating a ReserveBalance, 
including any possible rule conditions and applicable default values. Notice that it is up to an implementer to add 
additional mandatory attributes. 
Mandatory Attributes 
Rule 
amount 
 
 
Non Mandatory Attributes 
Rule 
confirmationDate 
 
description 
 
reason 
 
requestedDate 
 
status 
 
usageType 
 
@baseType 
 
@schemaLocation 
 
@type 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
relatedParty 
 
requestor 
 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 120 of 135 
Usage Samples 
Reserve an amount on the bucket identified by the id 11. The reserved amount on the bucket is 50 Euros as 
indicated by the reservedValue. 
 
Request 
 
POST /tmf-api/prepayBalanceManagement/v4/reserveBalance 
Content-Type: application/json 
 
{ 
    "bucket": { 
        "id": "11", 
        "href": "/prepayBalanceManagement/v4/bucket/11" 
    }, 
    "reason": "customer reserves a balance of 50 Euro", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "reservedValue": { 
        "amount": 50, 
        "units": "EUR" 
    }, 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry wilson", 
            "role": "customer" 
        } 
    ], 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
201 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/reserveBalance/1", 
    "status": "confirmed" 
} 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 121 of 135 
Patch reserve balance 
  PATCH /reserveBalance/{id} 
Description 
This operation allows partial updates of a reserve balance entity. Support of json/merge 
(https://tools.ietf.org/html/rfc7386) is mandatory, support of json/patch (http://tools.ietf.org/html/rfc5789) is optional. 
 
Note: If the update operation yields to the creation of sub-resources or relationships, the same rules concerning 
mandatory sub-resource attributes and default value settings in the POST operation applies to the PATCH operation.  
Hence these tables are not repeated here. 
Patchable and Non Patchable Attributes 
The tables below provide the list of patchable and non patchable attributes, including constraint rules on their usage. 
Patchable Attributes 
Rule 
status 
 
reason 
 
requestor 
 
relatedParty 
 
requestedDate 
 
 
Non Patchable Attributes 
Rule 
confirmationDate 
 
description 
 
href 
 
id 
 
usageType 
 
href 
 
id 
 
@baseType 
 
@schemaLocation 
 
@type 
 
amount 
 
bucket 
 
channel 
 
impactedBucket 
 
logicalResource 
 
partyAccount 
 
product 
 
 
Usage Samples 
Unreserve an amount on the bucket identified by the id 44. The reserved amount on the bucket is 50 Euros as 
indicated by the amount. 
 
Request 
 
PATCH /tmf-api/prepayBalanceManagement/v4/reserveBalance/42 
Content-Type: application/json 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 122 of 135 
{ 
    "status": "cancelled", 
    "reason": "Customer requests cancellation", 
    "requestedDate": "2020-02-11T23:20:50.52Z", 
    "channel": { 
        "id": "99", 
        "href": "/channel/99", 
        "name": "WEB" 
    }, 
    "requestor": { 
        "id": "55", 
        "href": "/partyManagement/v4/customer/agent1", 
        "name": "jim jordan", 
        "role": "agent" 
    } 
} 
 
 
 
Response 
 
200 
 
{ 
    "id": "1", 
    "href": "/prepayBalanceManagement/v4/reserveBalance/44", 
    "status": "confirmed" 
} 
 
Delete reserve balance 
  DELETE /reserveBalance/{id} 
Description 
This operation deletes a reserve balance entity. 
 
Usage Samples 
This operation deletes a ReserveBalance resource using the unique id of the reserve balance resource 
 
Request 
 
DELETE /tmf-api/prepayBalanceManagement/v4/reserveBalance/11 
 
 
 
Response 
 
204 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 123 of 135 
Operations on Accumulated Balance 
List accumulated balances 
  GET /accumulatedBalance?fields=...&{filtering} 
Description 
This operation list accumulated balance entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Fetch the Accumulated Balance resource for the product whose unique id is prd1. The query parameters are :-  
product.id=prd1 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/accumulatedBalance 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "id": "55", 
    "href": "/prepayBalanceManagement/v4/bucket?product.id=12345&bucketBalance[usageType==\"data\"]", 
    "description": "The query used to fetch the accumulated balance", 
    "@type": "AccumulatedBalance", 
    "@baseType": "Entity", 
    "bucket": [ 
        { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        { 
            "id": "12", 
            "href": "/prepayBalanceManagement/v4/bucket/12" 
        } 
    ], 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "product": { 
        "id": "prd1", 
        "href": "/productInventory/v4/product/prd1" 
    }, 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 124 of 135 
    "relatedParty": [ 
        { 
            "id": "cust1", 
            "href": "/partyManagement/customer/cust1", 
            "name": "jerry watts", 
            "role": "customer" 
        } 
    ], 
    "totalBalance": { 
        "amount": 200, 
        "units": "MB" 
    } 
} 
 
Retrieve accumulated balance 
  GET /accumulatedBalance/{id}?fields=...&{filtering} 
Description 
This operation retrieves an accumulated balance entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
 
Usage Samples 
Here's an example of a request for retrieving an AccumulatedBalance resource. 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/accumulatedBalance/6956 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "bucket": [ 
        { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        } 
    ], 
    "description": "an accumulation of balances", 
    "href": "/prepayBalanceManagmenet/v4/accumulatedBalance/6956", 
    "id": "6956", 
    "logicalResource": { 
        "id": "22", 
        "href": "/resourceInventoryManagement/v4/logicalResource/22", 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 125 of 135 
        "@type": "MSISDN", 
        "value": "07645233482" 
    }, 
    "name": "accumulatedBalance", 
    "partyAccount": { 
        "id": "acc1", 
        "href": "/accountManagement/v4/account/acc1" 
    }, 
    "product": [ 
        { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        } 
    ], 
    "relatedParty": [ 
        { 
            "id": "5", 
            "href": "/partyManagement/customer/22", 
            "name": "jerry lewis", 
            "role": "customer" 
        } 
    ], 
    "totalBalance": { 
        "amount": 900, 
        "units": "MB" 
    } 
} 
 
 
Operations on Balance Action 
List balance actions 
  GET /balanceAction?fields=...&{filtering} 
Description 
This operation list balance action entities. 
Attribute selection is enabled for all first level attributes. 
Filtering may be available depending on the compliance level supported by an implementation. 
Usage Samples 
Fetch the Balance Action resource for all topup balances. The query parameters are :-  
@type=TopupBalance 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/balanceAction?@type=TopupBalance 
Accept: application/json 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 126 of 135 
 
Response 
 
200 
 
[ 
    { 
        "id": "55", 
        "href": "/prepayBalanceManagement/v4/balanceAction?@type=TopupBalance", 
        "description": "The query used to fetch the balance history", 
        "@type": "TopupBalance", 
        "@baseType": "Action", 
        "bucket": { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "logicalResource": { 
            "@type": "MSISDN", 
            "value": "07645233482" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "adjustType": "oneTimeIncrement", 
        "validFor": { 
            "endDateTime": "1985-04-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
 
Fetch the Balance Action resource for all transfer balances with a specific receiver bucket. The query parameters are 
:-  
@type=TransferBalance&receiverBucket.id=22 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 127 of 135 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/balanceAction?@type=TransferBalance&receiverBucket.id='22' 
Accept: application/json 
 
 
 
Response 
 
200 
 
[ 
    { 
        "id": "55", 
        "href": "/prepayBalanceManagement/v4/balanceAction?@type=TransferBalance&receiverBucket=22", 
        "description": "The query used to fetch the balance history", 
        "@type": "TopupBalance", 
        "@baseType": "Action", 
        "bucket": { 
            "id": "11", 
            "href": "/prepayBalanceManagement/v4/bucket/11" 
        }, 
        "receiverBucket": { 
            "id": "22", 
            "href": "/prepayBalanceManagement/v4/bucket/22" 
        }, 
        "product": { 
            "id": "prd1", 
            "href": "/productInventory/v4/product/prd1" 
        }, 
        "channel": { 
            "id": "99", 
            "href": "/channel/99", 
            "name": "WEB" 
        }, 
        "logicalResource": { 
            "@type": "MSISDN", 
            "value": "07645233499" 
        }, 
        "relatedParty": [ 
            { 
                "id": "5", 
                "href": "/partyManagement/customer/22", 
                "name": "jerry lewis", 
                "role": "customer" 
            } 
        ], 
        "requestor": { 
            "id": "55", 
            "href": "/partyManagement/v4/customer/agent1", 
            "name": "jim jordan", 
            "role": "agent" 
        }, 
        "adjustType": "oneTimeIncrement", 
        "validFor": { 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 128 of 135 
            "endDateTime": "1985-04-12T23:20:50.52Z", 
            "startDateTime": "1985-04-12T23:20:50.52Z" 
        } 
    } 
] 
 
Retrieve balance action 
  GET /balanceAction/{id}?fields=...&{filtering} 
Description 
This operation retrieves a balance action entity. 
Attribute selection is enabled for all first level attributes. 
Filtering on sub-resources may be available depending on the compliance level supported by an implementation. 
Usage Samples 
Here's an example of a request for retrieving a BalanceAction resource. 
 
Request 
 
GET /tmf-api/prepayBalanceManagement/v4/balanceAction/a Uri ... 
Accept: application/json 
 
 
 
Response 
 
200 
 
{ 
    "href": "https:/host:port/tmf-api/balanceAction/v1/balanceAction/a Uri ...", 
    "id": "a Uri ...", 
    "amount": {}, 
    "bucket": {}, 
    "channel": {}, 
    "confirmationDate": "2020-07-16T00:00", 
    "description": "This  balance action ...", 
    "impactedBucket": [ 
        {} 
    ], 
    "logicalResource": {}, 
    "partyAccount": {}, 
    "product": {}, 
    "reason": "a string ...", 
    "relatedParty": [ 
        {} 
    ], 
    "requestedDate": "2020-07-16T00:00", 
    "requestor": {}, 
    "status": "a string ...", 
    "usageType": "a string ..." 
} 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 129 of 135 
Operations on Bucket Status Example Type 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 130 of 135 
API NOTIFICATIONS 
For every single of operation on the entities use the following templates and provide sample REST notification POST 
calls. 
It is assumed that the Pub/Sub uses the Register and UnRegister mechanisms described in the REST Guidelines 
reproduced below. 
 
Register listener 
  POST /hub 
Description 
Sets the communication endpoint address the service instance must use to deliver information about its health state, 
execution state, failures and metrics. Subsequent POST calls will be rejected by the service if it does not support 
multiple listeners. In this case DELETE /api/hub/{id} must be called before an endpoint can be created again. 
Behavior 
Returns HTTP/1.1 status code 204 if the request was successful. 
Returns HTTP/1.1 status code 409 if request is not successful. 
Usage Samples 
Here's an example of a request for registering a listener. 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 131 of 135 
 
Request 
 
POST /api/hub 
Accept: application/json 
 
{"callback": "http://in.listener.com"} 
 
 
Response 
 
201 
Content-Type: application/json 
Location: /api/hub/42 
 
{"id":"42","callback":"http://in.listener.com","query":null} 
 
 
 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 132 of 135 
Unregister listener 
  DELETE /hub/{id} 
Description 
Clears the communication endpoint address that was set by creating the Hub. 
Behavior 
Returns HTTP/1.1 status code 204 if the request was successful. 
Returns HTTP/1.1 status code 404 if the resource is not found. 
Usage Samples 
Here's an example of a request for un-registering a listener. 
 
Request 
 
DELETE /api/hub/42 
Accept: application/json 
 
 
Response 
 
204 
 
Publish Event to listener 
  POST /client/listener 
Description 
Clears the communication endpoint address that was set by creating the Hub. 
Provides to a registered listener the description of the event that was raised. The /client/listener url is the callback url 
passed when registering the listener. 
Behavior 
Returns HTTP/1.1 status code 201 if the service is able to set the configuration.  
Usage Samples 
Here's an example of a notification received by the listener. In this example “EVENT TYPE” should be replaced by 
one of the notification types supported by this API (see Notification resources Models section) and EVENT BODY 
refers to the data structure of the given notification type. 
 
Request 
 
POST /client/listener 
Accept: application/json 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 133 of 135 
 
{ 
    "event": {  
                EVENT BODY  
            }, 
    "eventType": "EVENT_TYPE" 
} 
 
 
Response 
 
201 
 
For detailed examples on the general TM Forum notification mechanism, see the TMF REST Design Guidelines. 
 


TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 134 of 135 
Appendix 
 
 
Usage Type 
Valid units in 
Quantity 
Description  
monetary 
EUR, GBP 
etc. 
Any valid currency 
data 
GB  
GB indicates gigabyte 
promotional-
data 
MB 
MB indicates megabyte 
voice 
minutes 
minutes indicates the amount is the 
number of minutes available to be 
consumed 
promotional-
voice 
seconds 
seconds indicates the amount is the 
number of seconds available to be 
consumed 
text 
number 
Number indicates the amount is the 
number of texts available to be 
consumed 


 TMF654 Prepay Balance Management API User Guide 
 
© TM Forum 2020. All Rights Reserved                                                                                        Page 135 of 135 
Acknowledgements 
Version History 
 
Version 
Number 
Date Modified 
Modified by: 
Description of changes 
4.0.0 
29-Jul-2020 
Alan Pope 
Final edits prior to publication 
 
Release History 
 
Release Status 
Date  
Release led by: 
Description  
Pre-production 
29-Jul-2020 
Kevin King - Vodafone 
Updated based on schema-library 
and Design Guideline v4 patterns 
Production 
23-Sep-2020 
Adrienne Walcott 
Updated to reflect TM Forum 
Approved Status 
 
 


